const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FieldCatalog-CGqkPOI9.js","assets/vendor-ui-CHMJddlm.js","assets/vendor-react-B7WRoy5K.js","assets/index-DtPl0Aq5.js","assets/vendor-charts-C5vizwv2.js","assets/index-BfGdlgke.css","assets/FormField-DYBwZHLt.js","assets/crosshair-V7IyEANw.js","assets/ConfirmDialog-CzgpSI6Z.js","assets/loader-2-Bagj4oM5.js","assets/plus-DbJFhMt0.js","assets/shield-yDWFBjZq.js","assets/tag-HfzsjchU.js","assets/pen-DyExwM_J.js","assets/trash-2-6_aEbyEp.js","assets/save-BUFuQ_vE.js","assets/FieldConfig-JcnSRsK1.js","assets/check-xYvCpsRn.js","assets/BackupSettings-D564zrQM.js","assets/clock-BNBMV1Ah.js","assets/download-BDjeYIb4.js","assets/upload-TyijRZ5p.js","assets/AuditLog-C4AfJmZ_.js","assets/filter-BzVARH1i.js","assets/search-DRt6k5Fg.js","assets/eye-U1JWTX2D.js","assets/NotificationSettings-DX9REirB.js","assets/mail-CjxTojxw.js","assets/calendar-QtzoQi5S.js","assets/PrivacySettings-BNwD3PLY.js","assets/x-circle-wNTTUt1a.js","assets/FavoritesSettings-DURgPQ41.js"])))=>i.map(i=>d[i]);
import{c as w,u as S,g as L,D as E,B as A,F as T,S as F,h as q,a as v,_}from"./index-DtPl0Aq5.js";import{j as e}from"./vendor-ui-CHMJddlm.js";import{r as a}from"./vendor-react-B7WRoy5K.js";import{F as h}from"./FormField-DYBwZHLt.js";import{C as z}from"./ConfirmDialog-CzgpSI6Z.js";import{S as O}from"./shield-yDWFBjZq.js";import{L as m}from"./loader-2-Bagj4oM5.js";import{S as C}from"./save-BUFuQ_vE.js";import{P}from"./plus-DbJFhMt0.js";import{T as D}from"./trash-2-6_aEbyEp.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=w("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=w("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=w("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=w("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=w("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),B=a.lazy(()=>_(()=>import("./FieldCatalog-CGqkPOI9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),H=a.lazy(()=>_(()=>import("./FieldConfig-JcnSRsK1.js"),__vite__mapDeps([16,1,2,3,4,5,9,15,11,12,17]))),U=a.lazy(()=>_(()=>import("./BackupSettings-D564zrQM.js"),__vite__mapDeps([18,1,2,3,4,5,8,9,10,19,20,21,14,6,7,11,15]))),K=a.lazy(()=>_(()=>import("./AuditLog-C4AfJmZ_.js"),__vite__mapDeps([22,1,2,3,4,5,23,20,24,9,25]))),G=a.lazy(()=>_(()=>import("./NotificationSettings-DX9REirB.js"),__vite__mapDeps([26,1,2,3,4,5,17,19,27,28]))),J=a.lazy(()=>_(()=>import("./PrivacySettings-BNwD3PLY.js"),__vite__mapDeps([29,1,2,3,4,5,11,17,20,14,19,30]))),Q=a.lazy(()=>_(()=>import("./FavoritesSettings-DURgPQ41.js"),__vite__mapDeps([31,1,2,3,4,5,9,15,10,14,6,7,8,11]))),W=({active:s,onClick:r,icon:n,label:d})=>e.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${s?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n,d]}),X=()=>{const{t:s}=S(),[r,n]=a.useState({}),[d,f]=a.useState(!0),[x,c]=a.useState(!1),[p,g]=a.useState({type:"",text:""});a.useEffect(()=>{y()},[]);const y=async()=>{try{const t=await v.get("/settings/prefixes");n(t)}catch(t){g({type:"error",text:t.message})}finally{f(!1)}},j=async()=>{c(!0);try{await v.put("/settings/prefixes",r),g({type:"success",text:s("settings.saved")})}catch(t){g({type:"error",text:t.message})}finally{c(!1)}},l=(t,u)=>{n(b=>({...b,[t]:u}))};return d?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.prefixesDescription")}),p.text&&e.jsx("div",{className:`p-4 rounded-lg ${p.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:p.text}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{label:s("settings.assetPrefix"),name:"assets",type:"text",value:r.assets||"",onChange:t=>l("assets",String(t)),helpText:"Ex: SLP"}),e.jsx(h,{label:s("settings.assetDigits"),name:"assets_digits",type:"number",value:r.assets_digits||"",onChange:t=>l("assets_digits",String(t)),helpText:`${s("settings.digits")} (ex: 9)`}),e.jsx(h,{label:s("settings.preventivePrefix"),name:"int_preventiva",type:"text",value:r.int_preventiva||"",onChange:t=>l("int_preventiva",String(t))}),e.jsx(h,{label:s("settings.correctivePrefix"),name:"int_corretiva",type:"text",value:r.int_corretiva||"",onChange:t=>l("int_corretiva",String(t))}),e.jsx(h,{label:s("settings.replacementPrefix"),name:"int_substituicao",type:"text",value:r.int_substituicao||"",onChange:t=>l("int_substituicao",String(t))}),e.jsx(h,{label:s("settings.inspectionPrefix"),name:"int_inspecao",type:"text",value:r.int_inspecao||"",onChange:t=>l("int_inspecao",String(t))}),e.jsx(h,{label:s("settings.interventionDigits"),name:"int_digits",type:"number",value:r.int_digits||"",onChange:t=>l("int_digits",String(t))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:j,disabled:x,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[x?e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(C,{className:"h-4 w-4 mr-2"}),s("common.save")]})})]})},Y=()=>{const{t:s}=S(),[r,n]=a.useState([]),[d,f]=a.useState(""),[x,c]=a.useState(!0),[p,g]=a.useState(!1),[y,j]=a.useState({type:"",text:""});a.useEffect(()=>{l()},[]);const l=async()=>{try{const o=await v.get("/settings/colors");n(o.colors||[])}catch(o){j({type:"error",text:o.message})}finally{c(!1)}},t=async()=>{g(!0);try{await v.put("/settings/colors",{colors:r}),j({type:"success",text:s("settings.saved")})}catch(o){j({type:"error",text:o.message})}finally{g(!1)}},u=()=>{d&&!r.includes(d)&&(n([...r,d]),f(""))},b=o=>{n(r.filter((N,i)=>i!==o))};return x?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.colorsDescription")}),y.text&&e.jsx("div",{className:`p-4 rounded-lg ${y.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:y.text}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:o=>f(o.target.value),placeholder:s("settings.newColor"),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",onKeyPress:o=>o.key==="Enter"&&u()}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map((o,N)=>e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-full",children:[e.jsx("span",{className:"text-sm",children:o}),e.jsx("button",{onClick:()=>b(N),className:"text-gray-400 hover:text-red-500",children:e.jsx(D,{className:"h-4 w-4"})})]},N))}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:t,disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[p?e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(C,{className:"h-4 w-4 mr-2"}),s("common.save")]})})]})},Z=()=>{const{t:s}=S(),[r,n]=a.useState([]),[d,f]=a.useState(!0),[x,c]=a.useState(null),[p,g]=a.useState({type:"",text:""});a.useEffect(()=>{y()},[]);const y=async()=>{try{const t=await v.get("/settings/counters");n(t.counters||[])}catch(t){g({type:"error",text:t.message})}finally{f(!1)}},j=async(t,u)=>{c(t);try{await v.put(`/settings/counters/${t}`,{value:u}),g({type:"success",text:s("settings.counterUpdated")}),y()}catch(b){g({type:"error",text:b.message})}finally{c(null)}},l={assets:s("navigation.assets"),int_preventiva:s("settings.preventivePrefix"),int_corretiva:s("settings.correctivePrefix"),int_substituicao:s("settings.replacementPrefix"),int_inspecao:s("settings.inspectionPrefix")};return d?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.countersDescription")}),p.text&&e.jsx("div",{className:`p-4 rounded-lg ${p.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:p.text}),e.jsx("div",{className:"space-y-4",children:r.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l[t.counter_type]||t.counter_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s("settings.next"),": ",t.current_value+1]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:t.current_value,onChange:u=>{const b=r.map(o=>o.counter_type===t.counter_type?{...o,current_value:parseInt(u.target.value)||0}:o);n(b)},className:"w-24 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-center"}),e.jsx("button",{onClick:()=>j(t.counter_type,t.current_value),disabled:x===t.counter_type,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x===t.counter_type?e.jsx(m,{className:"h-4 w-4 animate-spin"}):s("common.update")})]})]},t.counter_type))})]})},ee=()=>{const{t:s}=S(),[r,n]=a.useState([]),[d,f]=a.useState(!0),[x,c]=a.useState({type:"",text:""}),[p,g]=a.useState(!1),[y,j]=a.useState(null),[l,t]=a.useState({field_name:"",field_type:"text",field_label:"",required:!1,field_category:"other"});a.useEffect(()=>{u()},[]);const u=async()=>{try{const i=await v.get("/settings/schema");n(i.fields||[])}catch(i){c({type:"error",text:i.message})}finally{f(!1)}},b=async()=>{try{await v.post("/settings/schema",l),g(!1),t({field_name:"",field_type:"text",field_label:"",required:!1,field_category:"other"}),u(),c({type:"success",text:s("settings.fieldAdded")})}catch(i){c({type:"error",text:i.message})}},o=async i=>{try{await v.delete(`/settings/schema/${i}`),j(null),u(),c({type:"success",text:s("settings.fieldDeleted")})}catch(k){c({type:"error",text:k.message})}},N={identification:s("settings.categories.identification"),specifications:s("settings.categories.specifications"),installation:s("settings.categories.installation"),warranty:s("settings.categories.warranty"),maintenance:s("settings.categories.maintenance"),equipment:s("settings.categories.equipment"),other:s("settings.categories.other")};return d?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.schemaDescription")}),e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),s("settings.newField")]})]}),x.text&&e.jsx("div",{className:`p-4 rounded-lg ${x.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:x.text}),e.jsx("div",{className:"space-y-2",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:i.field_label}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i.field_name," | ",i.field_type," | ",N[i.field_category]||i.field_category,i.required?` | ${s("common.required")}`:""]})]}),e.jsx("button",{onClick:()=>j(i.id),className:"p-2 text-gray-400 hover:text-red-500",children:e.jsx(D,{className:"h-5 w-5"})})]},i.id))}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("settings.newField")}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{label:s("settings.fieldName"),name:"field_name",value:l.field_name,onChange:i=>t({...l,field_name:String(i)}),required:!0}),e.jsx(h,{label:s("settings.fieldLabel"),name:"field_label",value:l.field_label,onChange:i=>t({...l,field_label:String(i)}),required:!0}),e.jsx(h,{label:s("common.type"),name:"field_type",type:"select",value:l.field_type,onChange:i=>t({...l,field_type:String(i)}),options:["text","number","date","select","textarea"]}),e.jsx(h,{label:s("common.category"),name:"field_category",type:"select",value:l.field_category,onChange:i=>t({...l,field_category:String(i)}),options:Object.entries(N).map(([i,k])=>({value:i,label:k}))}),e.jsx(h,{label:s("common.required"),name:"required",type:"checkbox",value:l.required,onChange:i=>t({...l,required:!!i})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:s("common.cancel")}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:s("common.add")})]})]})}),e.jsx(z,{isOpen:y!==null,onClose:()=>j(null),onConfirm:()=>y&&o(y),title:s("settings.deleteField"),message:s("settings.deleteFieldConfirm"),confirmText:s("common.delete"),variant:"danger"})]})},se=()=>{const{t:s}=S(),{user:r}=L(),[n,d]=a.useState("prefixes"),f=(r==null?void 0:r.role)==="superadmin",x=[{id:"prefixes",label:s("settings.prefixes"),icon:e.jsx(I,{className:"h-4 w-4"})},{id:"favorites",label:s("settings.favorites")||"Favoritos",icon:e.jsx(V,{className:"h-4 w-4"})},{id:"colors",label:s("settings.colors"),icon:e.jsx(M,{className:"h-4 w-4"})},{id:"counters",label:s("settings.counters"),icon:e.jsx(E,{className:"h-4 w-4"})},{id:"fields",label:s("settings.fieldConfig")||"Campos",icon:e.jsx(R,{className:"h-4 w-4"})},{id:"notifications",label:s("notifications.title")||"Notificações",icon:e.jsx(A,{className:"h-4 w-4"})},{id:"privacy",label:s("privacy.title")||"Privacidade",icon:e.jsx(O,{className:"h-4 w-4"})},{id:"backup",label:s("backup.title")||"Backup",icon:e.jsx($,{className:"h-4 w-4"})},{id:"audit",label:s("auditLog.title")||"Audit Log",icon:e.jsx(T,{className:"h-4 w-4"})},{id:"schema",label:s("settings.schema"),icon:e.jsx(F,{className:"h-4 w-4"})}];return f&&x.splice(4,0,{id:"catalog",label:s("settings.fieldCatalog")||"Catálogo",icon:e.jsx(q,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s("settings.title")}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:x.map(c=>e.jsx(W,{active:n===c.id,onClick:()=>d(c.id),icon:c.icon,label:c.label},c.id))})}),e.jsxs("div",{className:"p-6",children:[n==="prefixes"&&e.jsx(X,{}),n==="favorites"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(Q,{})}),n==="colors"&&e.jsx(Y,{}),n==="counters"&&e.jsx(Z,{}),n==="fields"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(H,{})}),n==="catalog"&&f&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(B,{})}),n==="notifications"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(G,{})}),n==="privacy"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(J,{})}),n==="backup"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(U,{})}),n==="audit"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(K,{})}),n==="schema"&&e.jsx(ee,{})]})]})]})},ge=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{$ as H,V as S,ge as i};
