import{j as e}from"./vendor-ui-CHMJddlm.js";import{u as F,r as i}from"./vendor-react-B7WRoy5K.js";import{u as q}from"./useApi-NLVbg67q.js";import{k as M,u as z,X as N}from"./index-B4kLCiXA.js";import{A as T}from"./arrow-left-_PODbINl.js";import{S as U}from"./save-DtwIG-4T.js";import{B as C}from"./building-2-B9IZkhEc.js";import{C as W}from"./crown-Dj6XSgWI.js";import{Z}from"./zap-DSE4ycI_.js";import{S as u}from"./shield-DoAlDr2z.js";import{D as R}from"./database-Tk0afLsG.js";import{S as V}from"./settings-BtyuFtXW.js";import{B as X}from"./bar-chart-3-Bc28TW2b.js";import{F as G}from"./file-text-4hJVbqbZ.js";import{B as I}from"./book-open-RPqfCM9j.js";import{W as J}from"./wrench-Cf_knTNj.js";import{U as K}from"./users-sa6KibA9.js";import{P as S}from"./package-Cskwf8P9.js";import{C as v}from"./check-Ch2mZE1G.js";import"./vendor-charts-C5vizwv2.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=M("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=M("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ee={LayoutDashboard:Y,Package:S,Users:K,Wrench:J,BookOpen:I,HardHat:Q,FileText:G,BarChart3:X,Settings:V,Database:R,Building2:C},k={base:u,pro:Z,premium:W,enterprise:C},w={base:"bg-gray-100 text-gray-800 border-gray-300",pro:"bg-blue-100 text-blue-800 border-blue-300",premium:"bg-purple-100 text-purple-800 border-purple-300",enterprise:"bg-amber-100 text-amber-800 border-amber-300"};function we(){const _=F(),p=q(),{t:r}=z(),[d,c]=i.useState({}),[g,P]=i.useState({}),[A,y]=i.useState(!0),[b,f]=i.useState(!1),[se,ae]=i.useState(null),[B,o]=i.useState(!1),j=i.useCallback(async()=>{y(!0);try{const s=await p.get("/settings/plans");c(s.plans||{}),P(s.modules||{})}catch(s){console.error("Error loading plans:",s)}finally{y(!1)}},[p]);i.useEffect(()=>{j()},[j]);const H=(s,t)=>{c(a=>{const l=a[s];if(!l)return a;const m=l.modules||[];let x;return m.includes("*")?x=Object.keys(g).filter(h=>h!==t):m.includes(t)?x=m.filter(h=>h!==t):x=[...m,t],{...a,[s]:{...l,modules:x}}}),o(!0)},L=s=>{c(t=>{const a=t[s];return a?{...t,[s]:{...a,modules:["*"]}}:t}),o(!0)},O=s=>{c(t=>{const a=t[s];return a?{...t,[s]:{...a,modules:[]}}:t}),o(!0)},D=(s,t)=>{const a=d[s];return a?a.modules.includes("*")?!0:a.modules.includes(t):!1},E=async()=>{f(!0);try{for(const s of Object.keys(d))await p.put(`/settings/plans/${s}/modules`,{modules:d[s].modules});o(!1),alert(r("plans.allConfigsSaved"))}catch(s){alert(s.message||r("common.error"))}finally{f(!1)}};if(A)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const n=["base","pro","premium","enterprise"].filter(s=>d[s]).map(s=>({id:s,...d[s]})),$=Object.values(g);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>_("/tenants"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r("plans.title")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r("plans.subtitle")})]})]}),B&&e.jsxs("button",{onClick:E,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(U,{className:"w-4 h-4"}),r(b?"common.saving":"plans.saveChanges")]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-white w-48",children:r("plans.module")}),n.map(s=>{const t=k[s.id]||u;return e.jsx("th",{className:"px-4 py-3 text-center min-w-[140px]",children:e.jsxs("div",{className:`inline-flex flex-col items-center gap-1 px-3 py-2 rounded-lg border ${w[s.id]}`,children:[e.jsx(t,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:s.name})]})},s.id)})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:$.map(s=>{const t=ee[s.icon]||S;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsx(t,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.description})]})]})}),n.map(a=>{const l=D(a.id,s.id);return e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>H(a.id,s.id),className:`p-2 rounded-full transition-colors ${l?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,children:l?e.jsx(v,{className:"w-5 h-5"}):e.jsx(N,{className:"w-5 h-5"})})},a.id)})]},s.id)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:r("plans.quickActions")}),n.map(s=>e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>L(s.id),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",title:r("plans.allModules"),children:r("plans.allModules")}),e.jsx("button",{onClick:()=>O(s.id),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",title:r("plans.noModules"),children:r("plans.noModules")})]})},s.id))]})})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(s=>{const t=k[s.id]||u,a=s.limits||{};return e.jsxs("div",{className:`p-4 rounded-lg border ${w[s.id]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(t,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-semibold",children:s.name})]}),e.jsx("p",{className:"text-sm opacity-80 mb-3",children:s.description}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"opacity-70",children:[r("plans.limits.users"),":"]})," ",e.jsx("span",{className:"font-medium",children:a.max_users===-1?r("plans.limits.unlimited"):a.max_users})]}),e.jsxs("p",{children:[e.jsxs("span",{className:"opacity-70",children:[r("plans.limits.assets"),":"]})," ",e.jsx("span",{className:"font-medium",children:a.max_assets===-1?r("plans.limits.unlimited"):a.max_assets})]}),e.jsxs("p",{children:[e.jsxs("span",{className:"opacity-70",children:[r("plans.limits.storage"),":"]})," ",e.jsx("span",{className:"font-medium",children:a.max_storage_mb===-1?r("plans.limits.unlimited"):`${a.max_storage_mb} MB`})]})]})]},s.id)})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:r("plans.features")}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Funcionalidade"}),n.map(s=>e.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium",children:s.name},s.id))]})}),e.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:["2fa","api_access","export_excel","export_pdf","custom_branding","route_planner","analytics","priority_support"].map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm capitalize",children:s.replace(/_/g," ")}),n.map(t=>{var l;const a=(l=t.features)==null?void 0:l[s];return e.jsx("td",{className:"px-4 py-2 text-center",children:a?e.jsx(v,{className:"w-4 h-4 text-green-500 mx-auto"}):e.jsx(N,{className:"w-4 h-4 text-gray-300 mx-auto"})},t.id)})]},s))})]})})]})]})}export{we as default};
