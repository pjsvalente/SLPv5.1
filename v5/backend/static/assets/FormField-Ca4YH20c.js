import{j as e}from"./vendor-ui-CHMJddlm.js";import{r as v}from"./vendor-react-B7WRoy5K.js";import{u as C,i as L,aM as $,au as F}from"./index-BjfB3M3w.js";function I({name:h,value:s,onChange:r,placeholder:d,required:i,disabled:x,error:m}){const{t:l}=C(),[g,n]=v.useState(!1),[u,b]=v.useState(""),a=(o=>{if(!o)return{lat:"",lng:""};const c=o.split(",").map(k=>k.trim());return{lat:c[0]||"",lng:c[1]||""}})(s),j=o=>{const c=o.target.value;c||a.lng?r(`${c}, ${a.lng}`):r("")},y=o=>{const c=o.target.value;a.lat||c?r(`${a.lat}, ${c}`):r("")},N=o=>{r(o.target.value)},p=()=>{if(!navigator.geolocation){b(l("form.geolocationNotSupported"));return}n(!0),b(""),navigator.geolocation.getCurrentPosition(o=>{const c=o.coords.latitude.toFixed(8),k=o.coords.longitude.toFixed(8);r(`${c}, ${k}`),n(!1)},o=>{b(l("form.geolocationError")),n(!1),console.error("Geolocation error:",o)},{enableHighAccuracy:!0,timeout:1e4})},f=()=>{a.lat&&a.lng&&window.open(`https://www.google.com/maps?q=${a.lat},${a.lng}`,"_blank")},t=`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 dark:disabled:bg-gray-700 disabled:cursor-not-allowed ${m?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100`;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",id:h,name:h,value:s,onChange:N,placeholder:d||"latitude, longitude",required:i,disabled:x,className:`${t} pl-9`})]}),e.jsx("button",{type:"button",onClick:p,disabled:x||g,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:l("form.getCurrentLocation"),children:g?e.jsx($,{className:"h-4 w-4 animate-pulse"}):e.jsx(F,{className:"h-4 w-4"})}),a.lat&&a.lng&&e.jsx("button",{type:"button",onClick:f,disabled:x,className:"px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 flex items-center gap-1",title:l("form.viewOnGoogleMaps"),children:e.jsx($,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:l("form.latitude")}),e.jsx("input",{type:"number",step:"any",value:a.lat,onChange:j,placeholder:"-90 to 90",disabled:x,className:`${t} text-sm`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:l("form.longitude")}),e.jsx("input",{type:"number",step:"any",value:a.lng,onChange:y,placeholder:"-180 to 180",disabled:x,className:`${t} text-sm`})]})]}),u&&e.jsx("p",{className:"text-sm text-red-500",children:u})]})}const S=v.forwardRef(({label:h,name:s,type:r="text",value:d,onChange:i,options:x=[],placeholder:m,required:l=!1,disabled:g=!1,error:n,helpText:u,className:b="",rows:w=3},a)=>{const{t:j}=C(),y=`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 dark:disabled:bg-gray-700 disabled:cursor-not-allowed ${n?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100`,N=x.map(t=>typeof t=="string"?{value:t,label:t}:t),p=t=>{i&&i(r==="checkbox"?t.target.checked:r==="number"?t.target.value===""?"":Number(t.target.value):t.target.value)},f=()=>{switch(r){case"textarea":return e.jsx("textarea",{ref:a,id:s,name:s,value:String(d??""),onChange:p,placeholder:m,required:l,disabled:g,rows:w,className:y});case"select":return e.jsxs("select",{ref:a,id:s,name:s,value:String(d??""),onChange:p,required:l,disabled:g,className:y,children:[e.jsx("option",{value:"",children:m||j("form.select")}),N.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]});case"checkbox":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:a,type:"checkbox",id:s,name:s,checked:!!d,onChange:p,required:l,disabled:g,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:h})]});case"gps":return e.jsx(I,{name:s,value:String(d??""),onChange:t=>i&&i(t),placeholder:m||"41.33879, -8.60867",required:l,disabled:g,error:n});default:return e.jsx("input",{ref:a,type:r,id:s,name:s,value:r==="number"?d??"":String(d??""),onChange:p,placeholder:m,required:l,disabled:g,className:y})}};return r==="checkbox"?e.jsxs("div",{className:`${b}`,children:[f(),n&&e.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n}),u&&!n&&e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:u})]}):e.jsxs("div",{className:`${b}`,children:[e.jsxs("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[h,l===!0&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),f(),n&&e.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n}),u&&!n&&e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:u})]})});S.displayName="FormField";export{S as F};
