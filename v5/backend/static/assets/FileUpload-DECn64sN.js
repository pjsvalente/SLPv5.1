import{j as t}from"./vendor-ui-CHMJddlm.js";import{r as m}from"./vendor-react-B7WRoy5K.js";import{u as E,ad as O,T as P,U as S,P as B,ap as L}from"./index-gVb7keNU.js";function A({files:n,onFilesChange:u,onFileRemove:g,accept:v="*/*",multiple:N=!0,maxSize:i=3*1024*1024,maxFiles:h=10,disabled:o=!1,label:k}){const{t:l}=E(),[b,d]=m.useState(!1),[f,x]=m.useState(null),y=m.useRef(null),F=k||l("fileUpload.uploadFiles"),p=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB",D=e=>e.startsWith("image/")?t.jsx(S,{className:"h-8 w-8 text-blue-500"}):e==="application/pdf"?t.jsx(B,{className:"h-8 w-8 text-red-500"}):t.jsx(L,{className:"h-8 w-8 text-gray-500"}),w=e=>{const r=[],a=n.length;for(let s=0;s<e.length;s++){const c=e[s];if(a+r.length>=h){x(l("fileUpload.maxFilesError",{count:h}));break}if(c.size>i){x(l("fileUpload.maxSizeError",{name:c.name,size:p(i)}));continue}r.push(c)}return r},j=e=>{x(null);const a=w(e).map(s=>({name:s.name,size:s.size,type:s.type,file:s}));u([...n,...a])},U=e=>{e.preventDefault(),d(!1),!o&&e.dataTransfer.files.length>0&&j(e.dataTransfer.files)},I=e=>{e.preventDefault(),o||d(!0)},z=()=>{d(!1)},T=e=>{e.target.files&&e.target.files.length>0&&(j(e.target.files),e.target.value="")},C=e=>{const r=n[e];g&&g(r);const a=n.filter((s,c)=>c!==e);u(a)};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:F}),t.jsxs("div",{onDrop:U,onDragOver:I,onDragLeave:z,onClick:()=>{var e;return!o&&((e=y.current)==null?void 0:e.click())},className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${b?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"} ${o?"opacity-50 cursor-not-allowed":""}`,children:[t.jsx("input",{ref:y,type:"file",accept:v,multiple:N,onChange:T,disabled:o,className:"hidden"}),t.jsx(O,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l("fileUpload.dragAndDrop")," ",t.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:l("fileUpload.clickToSelect")})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:l("fileUpload.maxSizePerFile",{size:p(i)})})]}),f&&t.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:f}),n.length>0&&t.jsx("ul",{className:"space-y-2",children:n.map((e,r)=>t.jsxs("li",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[D(e.type),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:p(e.size)})]}),e.url&&t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm",onClick:a=>a.stopPropagation(),children:l("common.view")}),t.jsx("button",{onClick:a=>{a.stopPropagation(),C(r)},disabled:o,className:"p-1 text-gray-400 hover:text-red-500 disabled:opacity-50",children:t.jsx(P,{className:"h-4 w-4"})})]},r))})]})}export{A as F};
