import{j as e}from"./vendor-ui-DmBNdSVN.js";import{e as oe,f as T,u as H,r as c}from"./vendor-react-T01qSRBw.js";import{u as V}from"./useApi-BZgsW-zB.js";import"./FormField-Ba39GSYY.js";import{C as Z}from"./ConfirmDialog-DLv6qdaJ.js";import{F as te}from"./FileUpload-Cpm6qGSs.js";import{c as se,u as W,D as P,P as ie,W as me,U as ee,k as q,m as xe,X as re,d as M,n as z}from"./index-DX4T9gyP.js";import{D as J}from"./download-piDG4Ffy.js";import{U as R}from"./upload-COiU26mb.js";import{L as le}from"./layers-BVhp8sLO.js";import{A as G}from"./arrow-left-BlslNQWr.js";import{S as ge}from"./settings-2-Bf5N9rnl.js";import{C as pe}from"./chevron-up-By3FJq8K.js";import{E as ae}from"./eye-C4cOTVII.js";import"./crosshair-D6RNT-R-.js";import"./image-BAT24zCy.js";import"./vendor-charts-Bs1Eue5i.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=se("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=se("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);function $e(){return e.jsxs(oe,{children:[e.jsx(T,{index:!0,element:e.jsx(ue,{})}),e.jsx(T,{path:"export",element:e.jsx(be,{})}),e.jsx(T,{path:"import",element:e.jsx(je,{})}),e.jsx(T,{path:"backup",element:e.jsx(ke,{})}),e.jsx(T,{path:"catalog",element:e.jsx(ye,{})})]})}function ue(){const B=H(),t=V(),{t:a}=W(),[y,f]=c.useState(null);c.useEffect(()=>{_()},[]);const _=async()=>{try{const o=await t.get("/data/stats");f(o)}catch(o){console.error("Error loading stats:",o)}},b=[{title:a("data.exportData"),description:a("data.exportDataDesc"),icon:J,color:"blue",path:"/data/export"},{title:a("data.importData"),description:a("data.importDataDesc"),icon:R,color:"green",path:"/data/import"},{title:a("data.catalogData"),description:a("data.catalogDataDesc"),icon:le,color:"purple",path:"/data/catalog"},{title:a("data.backups"),description:a("data.backupsDesc"),icon:P,color:"yellow",path:"/data/backup"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("data.title")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("data.subtitle")})]}),y&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(ie,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("navigation.assets")}),e.jsx("p",{className:"text-xl font-bold",children:y.assets||0})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(me,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("navigation.interventions")}),e.jsx("p",{className:"text-xl font-bold",children:y.interventions||0})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("navigation.technicians")}),e.jsx("p",{className:"text-xl font-bold",children:y.technicians||0})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("navigation.users")}),e.jsx("p",{className:"text-xl font-bold",children:y.users||0})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map(o=>{const v=o.icon;return e.jsxs("button",{onClick:()=>B(o.path),className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 text-left hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:`inline-flex p-3 rounded-lg bg-${o.color}-100 dark:bg-${o.color}-900 mb-4`,children:e.jsx(v,{className:`w-6 h-6 text-${o.color}-600 dark:text-${o.color}-400`})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:o.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:o.description})]},o.path)})})]})}function be(){const B=H(),t=V(),{t:a}=W(),[y,f]=c.useState(!1),[_,b]=c.useState(!0),[o,v]=c.useState("excel"),[k,u]=c.useState([]),[N,h]=c.useState({}),[n,m]=c.useState({include_history:!0,include_interventions:!0,include_updates:!0}),[j,p]=c.useState({assets:!0,interventions:!0,technicians:!0});c.useEffect(()=>{F()},[]);const F=async()=>{try{const d=((await t.get("/data/export/excel/fields")).fields||[]).map(w=>({...w,selected:!0}));u(d);const i=[...new Set(d.map(w=>w.category))],g={};i.forEach(w=>{g[w]=!0}),h(g)}catch(r){console.error("Error loading fields:",r)}finally{b(!1)}},I=r=>{h(d=>({...d,[r]:!d[r]}))},x=r=>{const i=k.filter(g=>g.category===r).every(g=>g.selected);u(k.map(g=>g.category===r?{...g,selected:!i}:g))},C=r=>{u(k.map(d=>d.name===r?{...d,selected:!d.selected}:d))},U=()=>u(k.map(r=>({...r,selected:!0}))),A=()=>u(k.map(r=>({...r,selected:!1}))),l=k.reduce((r,d)=>{const i=d.category||"other";return r[i]||(r[i]=[]),r[i].push(d),r},{}),S=async()=>{f(!0);try{const r=k.filter(O=>O.selected).map(O=>O.name),d=await fetch("/api/data/export/excel",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({fields:r,...n})});if(!d.ok)throw new Error(a("data.errorExporting"));const i=await d.blob(),g=window.URL.createObjectURL(i),w=document.createElement("a");w.href=g,w.download=`ativos_export_${new Date().toISOString().slice(0,10)}.xlsx`,document.body.appendChild(w),w.click(),window.URL.revokeObjectURL(g),document.body.removeChild(w)}catch(r){alert(r.message||a("data.errorExporting"))}finally{f(!1)}},D=async()=>{f(!0);try{const r=await fetch("/api/data/export/json",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(j)});if(!r.ok)throw new Error(a("data.errorExporting"));const d=await r.blob(),i=window.URL.createObjectURL(d),g=document.createElement("a");g.href=i,g.download=`backup_data_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(i),document.body.removeChild(g)}catch(r){alert(r.message||a("data.errorExporting"))}finally{f(!1)}},L=async()=>{try{const r=await fetch("/api/data/import/excel/template",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error(a("data.errorDownloadingTemplate"));const d=await r.blob(),i=window.URL.createObjectURL(d),g=document.createElement("a");g.href=i,g.download="template_importacao.xlsx",document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(i),document.body.removeChild(g)}catch(r){alert(r.message||a("data.errorDownloadingTemplate"))}},Q={system:a("data.categorySystem"),identification:a("data.categoryIdentification"),specifications:a("data.categorySpecifications"),installation:a("data.categoryInstallation"),warranty:a("data.categoryWarranty"),maintenance:a("data.categoryMaintenance"),equipment:a("data.categoryEquipment"),other:a("data.categoryOther")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>B("/data"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("data.exportData")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("data.exportDataToFiles")})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:a("data.exportFormat")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>v("excel"),className:`p-4 rounded-lg border-2 text-left ${o==="excel"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a("data.excelFormat")}),e.jsx("p",{className:"text-sm text-gray-500",children:a("data.export4Sheets")})]})]})}),e.jsx("button",{onClick:()=>v("json"),className:`p-4 rounded-lg border-2 text-left ${o==="json"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a("data.jsonFormat")}),e.jsx("p",{className:"text-sm text-gray-500",children:a("data.exportAllData")})]})]})})]}),o==="excel"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("h3",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),a("data.includedSheets")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.include_history,onChange:r=>m(d=>({...d,include_history:r.target.checked})),className:"rounded"}),e.jsx("span",{children:a("data.statusHistory")})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.include_interventions,onChange:r=>m(d=>({...d,include_interventions:r.target.checked})),className:"rounded"}),e.jsx("span",{children:a("navigation.interventions")})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.include_updates,onChange:r=>m(d=>({...d,include_updates:r.target.checked})),className:"rounded"}),e.jsx("span",{children:a("data.fieldUpdates")})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),a("data.fieldsToExport")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:U,className:"text-sm text-blue-600 hover:underline",children:a("common.selectAll")}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:A,className:"text-sm text-blue-600 hover:underline",children:a("common.selectNone")})]})]}),_?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"})}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Object.entries(l).map(([r,d])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>I(r),className:"w-full flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:d.every(i=>i.selected),onChange:()=>x(r),onClick:i=>i.stopPropagation(),className:"rounded"}),e.jsx("span",{className:"font-medium text-sm",children:Q[r]||r}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",d.filter(i=>i.selected).length,"/",d.length,")"]})]}),N[r]?e.jsx(pe,{className:"w-4 h-4"}):e.jsx(xe,{className:"w-4 h-4"})]}),N[r]&&e.jsx("div",{className:"p-2 grid grid-cols-2 md:grid-cols-3 gap-2",children:d.map(i=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:i.selected,onChange:()=>C(i.name),className:"rounded"}),e.jsx("span",{className:"truncate",children:i.label})]},i.name))})]},r))})]})]}),o==="json"&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-3",children:a("data.includeInExport")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:j.assets,onChange:r=>p(d=>({...d,assets:r.target.checked})),className:"rounded"}),e.jsx("span",{children:a("navigation.assets")})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:j.interventions,onChange:r=>p(d=>({...d,interventions:r.target.checked})),className:"rounded"}),e.jsx("span",{children:a("navigation.interventions")})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:j.technicians,onChange:r=>p(d=>({...d,technicians:r.target.checked})),className:"rounded"}),e.jsx("span",{children:a("navigation.technicians")})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[e.jsxs("button",{onClick:o==="excel"?S:D,disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(J,{className:"w-4 h-4"}),a(y?"data.exporting":"common.export")]}),o==="excel"&&e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:[e.jsx(q,{className:"w-4 h-4"}),a("data.downloadTemplate")]})]})]})]})}function je(){const B=H(),{t}=W(),[a,y]=c.useState(!1),[f,_]=c.useState(!1),[b,o]=c.useState("excel"),[v,k]=c.useState([]),[u,N]=c.useState(null),[h,n]=c.useState(null),[m,j]=c.useState("upsert"),[p,F]=c.useState(!0),I=l=>{k(l),n(null),N(null)},x=v.length>0?v[0].file:null,C=async()=>{if(!x){alert(t("data.selectAFile"));return}_(!0),N(null);try{const l=new FormData;l.append("file",x);const S=await fetch("/api/data/import/excel/preview",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:l}),D=await S.json();if(!S.ok)throw new Error(D.error||t("data.errorPreviewing"));N(D)}catch(l){alert(l.message||t("data.errorPreviewing"))}finally{_(!1)}},U=async()=>{if(!x){alert(t("data.selectAFile"));return}y(!0),n(null);try{const l=new FormData;l.append("file",x),l.append("mode",m),l.append("convert_suspended",p.toString());const D=await fetch(b==="excel"?"/api/data/import/excel":"/api/data/import/json",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:l}),L=await D.json();if(!D.ok)throw new Error(L.error||t("data.errorImporting"));n(L),N(null)}catch(l){n({error:l.message||t("data.errorImporting")})}finally{y(!1)}},A=[{value:"upsert",label:t("data.modeUpsert"),description:t("data.modeUpsertDesc")},{value:"create_only",label:t("data.modeCreateOnly"),description:t("data.modeCreateOnlyDesc")},{value:"update_only",label:t("data.modeUpdateOnly"),description:t("data.modeUpdateOnlyDesc")}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>B("/data"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("data.importData")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("data.importDataFromFiles")})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:t("data.importFormat")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx("button",{onClick:()=>{o("excel"),k([]),n(null),N(null)},className:`p-4 rounded-lg border-2 text-left ${b==="excel"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t("data.excelFormat")}),e.jsx("p",{className:"text-sm text-gray-500",children:t("data.importAssetsExcel")})]})]})}),e.jsx("button",{onClick:()=>{o("json"),k([]),n(null),N(null)},className:`p-4 rounded-lg border-2 text-left ${b==="json"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t("data.jsonFormat")}),e.jsx("p",{className:"text-sm text-gray-500",children:t("data.importBackupJson")})]})]})})]}),b==="excel"&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-3",children:t("data.importMode")}),e.jsx("div",{className:"space-y-2",children:A.map(l=>e.jsxs("label",{className:"flex items-start gap-3 p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"importMode",value:l.value,checked:m===l.value,onChange:S=>j(S.target.value),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.label}),e.jsx("p",{className:"text-sm text-gray-500",children:l.description})]})]},l.value))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:l=>F(l.target.checked),className:"rounded"}),e.jsx("span",{children:t("data.convertSuspendedToActive")})]})})]}),e.jsx(te,{files:v,onFilesChange:I,accept:b==="excel"?".xlsx,.xls":".json",maxFiles:1,multiple:!1}),u&&e.jsxs("div",{className:"mt-6 border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),t("data.preview")]}),e.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:e.jsx(re,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-white dark:bg-gray-800 rounded",children:[e.jsx("p",{className:"text-gray-500",children:t("data.total")}),e.jsx("p",{className:"text-lg font-bold",children:u.stats.total})]}),e.jsxs("div",{className:"text-center p-2 bg-green-50 dark:bg-green-900/20 rounded",children:[e.jsx("p",{className:"text-green-600",children:t("data.new")}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:u.stats.new})]}),e.jsxs("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[e.jsx("p",{className:"text-blue-600",children:t("data.updates")}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:u.stats.update})]}),e.jsxs("div",{className:"text-center p-2 bg-red-50 dark:bg-red-900/20 rounded",children:[e.jsx("p",{className:"text-red-600",children:t("data.errors")}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:u.stats.errors})]})]})]}),e.jsx("div",{className:"max-h-64 overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:t("data.row")}),e.jsx("th",{className:"p-2 text-left",children:t("common.serialNumber")}),e.jsx("th",{className:"p-2 text-left",children:t("common.status")}),e.jsx("th",{className:"p-2 text-left",children:t("data.action")}),e.jsx("th",{className:"p-2 text-left",children:t("data.validation")})]})}),e.jsx("tbody",{children:u.rows.map(l=>e.jsxs("tr",{className:`border-t border-gray-200 dark:border-gray-600 ${l.is_valid?"":"bg-red-50 dark:bg-red-900/10"}`,children:[e.jsx("td",{className:"p-2",children:l.row_num}),e.jsx("td",{className:"p-2 font-mono",children:l.serial_number||"-"}),e.jsx("td",{className:"p-2",children:l.status}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${l.action==="create"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"}`,children:l.action==="create"?t("data.create"):t("data.update")})}),e.jsxs("td",{className:"p-2",children:[l.is_valid?e.jsx(M,{className:"w-4 h-4 text-green-500"}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-xs text-red-600",children:l.errors.join(", ")})]}),l.warnings.length>0&&e.jsx("span",{className:"text-xs text-yellow-600",children:l.warnings.join(", ")})]})]},l.row_num))})]})}),u.has_more&&e.jsx("div",{className:"p-2 text-center text-sm text-gray-500 bg-gray-50 dark:bg-gray-700",children:t("data.previewLimited")})]}),e.jsxs("div",{className:"mt-6 flex gap-4",children:[b==="excel"&&!u&&e.jsxs("button",{onClick:C,disabled:f||!x,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700 disabled:opacity-50",children:[e.jsx(ae,{className:"w-4 h-4"}),t(f?"data.loading":"data.preview")]}),e.jsxs("button",{onClick:U,disabled:a||!x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(R,{className:"w-4 h-4"}),t(a?"data.importing":"common.import")]})]}),h&&e.jsx("div",{className:`mt-6 p-4 rounded-lg ${h.error?"bg-red-50 dark:bg-red-900/20":"bg-green-50 dark:bg-green-900/20"}`,children:h.error?e.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{children:h.error})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-2",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:h.message})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[h.imported!==void 0&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[t("data.imported"),":"]}),e.jsx("span",{className:"ml-1 font-medium",children:h.imported})]}),h.updated!==void 0&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[t("data.updated"),":"]}),e.jsx("span",{className:"ml-1 font-medium",children:h.updated})]}),h.skipped!==void 0&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[t("data.skipped"),":"]}),e.jsx("span",{className:"ml-1 font-medium",children:h.skipped})]})]}),h.errors&&h.errors.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-red-100 dark:bg-red-900/30 rounded",children:[e.jsxs("p",{className:"text-sm font-medium text-red-600",children:[t("data.errors"),":"]}),e.jsx("ul",{className:"text-sm text-red-600 list-disc list-inside",children:h.errors.map((l,S)=>e.jsx("li",{children:l},S))})]})]})})]})]})}function ye(){const B=H(),{t}=W(),[a,y]=c.useState(!1),[f,_]=c.useState([]),[b,o]=c.useState(null),[v,k]=c.useState("upsert"),u=async()=>{y(!0);try{const n=await fetch("/api/data/export/catalog",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error(t("data.errorExporting"));const m=await n.blob(),j=window.URL.createObjectURL(m),p=document.createElement("a");p.href=j,p.download=`catalogo_export_${new Date().toISOString().slice(0,10)}.xlsx`,document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(j),document.body.removeChild(p)}catch(n){alert(n.message||t("data.errorExporting"))}finally{y(!1)}},N=async()=>{try{const n=await fetch("/api/data/export/catalog/template",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error(t("data.errorDownloadingTemplate"));const m=await n.blob(),j=window.URL.createObjectURL(m),p=document.createElement("a");p.href=j,p.download="template_catalogo.xlsx",document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(j),document.body.removeChild(p)}catch(n){alert(n.message||t("data.errorDownloadingTemplate"))}},h=async()=>{const n=f.length>0?f[0].file:null;if(!n){alert(t("data.selectAFile"));return}y(!0),o(null);try{const m=new FormData;m.append("file",n),m.append("mode",v);const j=await fetch("/api/data/import/catalog",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:m}),p=await j.json();if(!j.ok)throw new Error(p.error||t("data.errorImporting"));o(p)}catch(m){o({error:m.message||t("data.errorImporting")})}finally{y(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>B("/data"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("data.catalogData")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("data.catalogDataDesc")})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),t("data.exportCatalog")]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:t("data.exportCatalogDesc")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:u,disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(q,{className:"w-4 h-4"}),t(a?"data.exporting":"data.exportCatalog")]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:[e.jsx(he,{className:"w-4 h-4"}),t("data.downloadTemplate")]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),t("data.importCatalog")]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:t("data.importMode")}),e.jsxs("select",{value:v,onChange:n=>k(n.target.value),className:"w-full md:w-64 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"upsert",children:t("data.modeUpsert")}),e.jsx("option",{value:"create_only",children:t("data.modeCreateOnly")}),e.jsx("option",{value:"update_only",children:t("data.modeUpdateOnly")})]})]}),e.jsx(te,{files:f,onFilesChange:n=>{_(n),o(null)},accept:".xlsx,.xls",maxFiles:1,multiple:!1}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:h,disabled:a||f.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[e.jsx(R,{className:"w-4 h-4"}),t(a?"data.importing":"data.importCatalog")]})}),b&&e.jsx("div",{className:`mt-6 p-4 rounded-lg ${b.error?"bg-red-50 dark:bg-red-900/20":"bg-green-50 dark:bg-green-900/20"}`,children:b.error?e.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400",children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{children:b.error})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-3",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:b.message})]}),b.results&&Object.entries(b.results).map(([n,m])=>e.jsxs("div",{className:"mb-2 p-2 bg-white dark:bg-gray-800 rounded",children:[e.jsx("p",{className:"font-medium",children:n}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t("data.imported"),": ",m.imported," |"," ",t("data.updated"),": ",m.updated," |"," ",t("data.skipped"),": ",m.skipped]}),m.errors&&m.errors.length>0&&e.jsx("ul",{className:"text-xs text-red-600 mt-1",children:m.errors.map((j,p)=>e.jsx("li",{children:j},p))})]},n))]})})]})]})}function ke(){var K,X;const B=H(),t=V(),{t:a}=W(),[y,f]=c.useState([]),[_,b]=c.useState([]),[o,v]=c.useState(!0),[k,u]=c.useState(!1),[N,h]=c.useState({open:!1,backup:null}),[n,m]=c.useState({open:!1,backup:null}),[j,p]=c.useState(!0),[F,I]=c.useState("manual"),[x,C]=c.useState({enabled:!1,schedule_type:"daily",time:"03:00",day_of_week:0,day_of_month:1,max_backups:10,include_uploads:!0}),[U,A]=c.useState(null),[l,S]=c.useState(!1);c.useEffect(()=>{D(),L()},[]);const D=async()=>{try{const[s,E]=await Promise.all([t.get("/backup/list"),t.get("/backup/scheduler/history")]);f(s.backups||[]),b(E.history||[])}catch(s){console.error("Error loading backups:",s)}finally{v(!1)}},L=async()=>{try{const[s,E]=await Promise.all([t.get("/backup/scheduler/config"),t.get("/backup/scheduler/next-run")]);C(s.config||x),A(E.next_run)}catch(s){console.error("Error loading scheduler config:",s)}},Q=async()=>{u(!0);try{await t.post("/backup/create-full",{include_uploads:j}),D()}catch(s){alert(s.message||a("data.errorCreatingBackup"))}finally{u(!1)}},r=async()=>{u(!0);try{await t.post("/backup/scheduler/run-now"),D()}catch(s){alert(s.message||a("data.errorCreatingBackup"))}finally{u(!1)}},d=async()=>{S(!0);try{await t.put("/backup/scheduler/config",x),L()}catch(s){alert(s.message||"Error saving configuration")}finally{S(!1)}},i=async s=>{try{const E=await fetch(`/api/backup/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!E.ok)throw new Error(a("data.errorDownloadingBackup"));const ce=await E.blob(),Y=window.URL.createObjectURL(ce),$=document.createElement("a");$.href=Y,$.download=s,document.body.appendChild($),$.click(),window.URL.revokeObjectURL(Y),document.body.removeChild($)}catch(E){alert(E.message||a("data.errorDownloadingBackup"))}},g=async()=>{if(N.backup)try{await t.delete(`/backup/${N.backup.filename}`),h({open:!1,backup:null}),D()}catch(s){alert(s.message||a("data.errorDeletingBackup"))}},w=async()=>{if(n.backup)try{await t.post(`/backup/restore/${n.backup.filename}`,{confirm:!0}),m({open:!1,backup:null}),alert(a("data.backupRestored")),window.location.reload()}catch(s){alert(s.message||a("data.errorRestoringBackup"))}},O=s=>s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/(1024*1024)).toFixed(1)} MB`,ne=[a("backup.monday")||"Segunda",a("backup.tuesday")||"Terça",a("backup.wednesday")||"Quarta",a("backup.thursday")||"Quinta",a("backup.friday")||"Sexta",a("backup.saturday")||"Sábado",a("backup.sunday")||"Domingo"];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>B("/data"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("data.backups")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("data.manageBackups")})]})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-4",children:[{id:"manual",label:a("backup.manualBackups")||"Backups Manuais"},{id:"automatic",label:a("backup.automaticBackups")||"Backups Automáticos"},{id:"settings",label:a("backup.schedulerSettings")||"Agendamento"}].map(s=>e.jsx("button",{onClick:()=>I(s.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${F===s.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:s.label},s.id))})}),F==="manual"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:s=>p(s.target.checked),className:"rounded border-gray-300"}),a("backup.includeUploads")||"Incluir ficheiros"]})}),e.jsxs("button",{onClick:Q,disabled:k,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(P,{className:"w-4 h-4"}),a(k?"data.creating":"data.createBackup")]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:o?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):y.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:a("data.noBackupsFound")}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:y.map(s=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.filename}),e.jsxs("p",{className:"text-sm text-gray-500",children:[O(s.size)," • ",new Date(s.created_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(s.filename),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:a("common.download"),children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>m({open:!0,backup:s}),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded",title:a("data.restore"),children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h({open:!0,backup:s}),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:a("common.delete"),children:e.jsx(z,{className:"w-4 h-4"})})]})]},s.filename))})})]}),F==="automatic"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x.enabled?e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(M,{className:"w-4 h-4"}),a("backup.schedulerEnabled")||"Agendamento ativo"]}):e.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(re,{className:"w-4 h-4"}),a("backup.schedulerDisabled")||"Agendamento inativo"]}),U&&e.jsxs("span",{className:"text-sm text-gray-500 ml-4",children:[a("backup.nextRun")||"Próximo",": ",new Date(U).toLocaleString()]})]}),e.jsxs("button",{onClick:r,disabled:k,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[e.jsx(P,{className:"w-4 h-4"}),a("backup.runNow")||"Executar Agora"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:_.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:a("backup.noAutoBackups")||"Nenhum backup automático"}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map(s=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.filename}),e.jsxs("p",{className:"text-sm text-gray-500",children:[O(s.size)," • ",new Date(s.created_at).toLocaleString(),s.include_uploads&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 px-1 rounded",children:"+ ficheiros"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(s.filename),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:a("common.download"),children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>m({open:!0,backup:s}),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded",title:a("data.restore"),children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h({open:!0,backup:s}),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:a("common.delete"),children:e.jsx(z,{className:"w-4 h-4"})})]})]},s.filename))})})]}),F==="settings"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:a("backup.schedulerConfig")||"Configuração do Agendamento"}),e.jsxs("div",{className:"space-y-4 max-w-lg",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:x.enabled,onChange:s=>C({...x,enabled:s.target.checked}),className:"rounded border-gray-300 w-5 h-5"}),e.jsx("span",{className:"font-medium",children:a("backup.enableScheduler")||"Ativar backup automático"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("backup.scheduleType")||"Frequência"}),e.jsxs("select",{value:x.schedule_type,onChange:s=>C({...x,schedule_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"daily",children:a("backup.daily")||"Diário"}),e.jsx("option",{value:"weekly",children:a("backup.weekly")||"Semanal"}),e.jsx("option",{value:"monthly",children:a("backup.monthly")||"Mensal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("backup.time")||"Hora"}),e.jsx("input",{type:"time",value:x.time,onChange:s=>C({...x,time:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]})]}),x.schedule_type==="weekly"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("backup.dayOfWeek")||"Dia da semana"}),e.jsx("select",{value:x.day_of_week,onChange:s=>C({...x,day_of_week:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:ne.map((s,E)=>e.jsx("option",{value:E,children:s},E))})]}),x.schedule_type==="monthly"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("backup.dayOfMonth")||"Dia do mês"}),e.jsx("input",{type:"number",min:"1",max:"28",value:x.day_of_month,onChange:s=>C({...x,day_of_month:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("backup.maxBackups")||"Máximo de backups a manter"}),e.jsx("input",{type:"number",min:"1",max:"100",value:x.max_backups,onChange:s=>C({...x,max_backups:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a("backup.maxBackupsHelp")||"Backups antigos serão eliminados automaticamente"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:x.include_uploads,onChange:s=>C({...x,include_uploads:s.target.checked}),className:"rounded border-gray-300"}),e.jsx("span",{children:a("backup.includeUploadsInAuto")||"Incluir ficheiros carregados no backup"})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:d,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[l?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(M,{className:"w-4 h-4"}),a("common.save")]})})]})]}),e.jsx(Z,{open:N.open,title:a("data.deleteBackup"),message:a("data.confirmDeleteBackup",{name:(K=N.backup)==null?void 0:K.filename}),confirmLabel:a("common.delete"),variant:"danger",onConfirm:g,onCancel:()=>h({open:!1,backup:null})}),e.jsx(Z,{open:n.open,title:a("data.restoreBackup"),message:a("data.confirmRestoreBackup",{name:(X=n.backup)==null?void 0:X.filename}),confirmLabel:a("data.restore"),variant:"warning",onConfirm:w,onCancel:()=>m({open:!1,backup:null})})]})}export{$e as default};
