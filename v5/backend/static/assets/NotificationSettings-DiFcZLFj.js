import{j as e}from"./vendor-ui-CHMJddlm.js";import{r as i}from"./vendor-react-B7WRoy5K.js";import{k as _,u as w,a as m,L as g,A as S}from"./index-B4kLCiXA.js";import{B as E}from"./index-BL-5PVsj.js";import{C as f}from"./check-Ch2mZE1G.js";import{C}from"./clock-DpJe5Urc.js";import{M as R}from"./mail-Cc3ebaqt.js";import{C as T}from"./calendar-8jGHqjMi.js";import"./vendor-charts-C5vizwv2.js";import"./FormField-DCiDuQxK.js";import"./map-pin-jrFkuuJh.js";import"./crosshair-CN5pgBQt.js";import"./ConfirmDialog-Nn_G2xOX.js";import"./database-Tk0afLsG.js";import"./shield-DoAlDr2z.js";import"./file-text-4hJVbqbZ.js";import"./settings-BtyuFtXW.js";import"./book-open-RPqfCM9j.js";import"./loader-2-DC_6Rbqm.js";import"./save-DtwIG-4T.js";import"./plus-Cfzt9kvo.js";import"./trash-2-BUuoS4ap.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=_("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ee=()=>{const{t}=w(),[b,h]=i.useState(!0),[x,y]=i.useState(!1),[p,u]=i.useState(!1),[l,j]=i.useState(""),[d,r]=i.useState(null),[s,o]=i.useState({email_maintenance_alerts:"true",email_daily_report:"false",email_intervention_updates:"true",alert_days_before:"7",warranty_alert_days:"30"});i.useEffect(()=>{v()},[]);const v=async()=>{try{const a=await m.get("/settings/notifications");o(a)}catch(a){r({type:"error",text:a.message||t("errors.SERVER_ERROR")})}finally{h(!1)}},k=async()=>{y(!0),r(null);try{await m.put("/settings/notifications",s),r({type:"success",text:t("notifications.settingsSaved")})}catch(a){r({type:"error",text:a.message||t("errors.SERVER_ERROR")})}finally{y(!1)}},N=async()=>{if(l){u(!0),r(null);try{await m.post("/settings/notifications/test",{email:l}),r({type:"success",text:t("notifications.testEmailSent")})}catch(a){r({type:"error",text:a.message||t("notifications.testEmailFailed")})}finally{u(!1)}}},c=a=>{o(n=>({...n,[a]:n[a]==="true"?"false":"true"}))};return b?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(g,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:t("notifications.title")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("notifications.description")})]})]}),d&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 ${d.type==="success"?"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-300"}`,children:[d.type==="success"?e.jsx(f,{className:"h-5 w-5"}):e.jsx(S,{className:"h-5 w-5"}),d.text]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(C,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:t("notifications.maintenanceAlerts")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("notifications.maintenanceAlertsDesc")})]})]}),e.jsx("button",{onClick:()=>c("email_maintenance_alerts"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.email_maintenance_alerts==="true"?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.email_maintenance_alerts==="true"?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(R,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:t("notifications.interventionUpdates")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("notifications.interventionUpdatesDesc")})]})]}),e.jsx("button",{onClick:()=>c("email_intervention_updates"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.email_intervention_updates==="true"?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.email_intervention_updates==="true"?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(T,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:t("notifications.dailyReport")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("notifications.dailyReportDesc")})]})]}),e.jsx("button",{onClick:()=>c("email_daily_report"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.email_daily_report==="true"?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.email_daily_report==="true"?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:t("notifications.alertTiming")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("notifications.daysBeforeMaintenance")}),e.jsxs("select",{value:s.alert_days_before,onChange:a=>o(n=>({...n,alert_days_before:a.target.value})),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsxs("option",{value:"3",children:["3 ",t("common.days")]}),e.jsxs("option",{value:"7",children:["7 ",t("common.days")]}),e.jsxs("option",{value:"14",children:["14 ",t("common.days")]}),e.jsxs("option",{value:"30",children:["30 ",t("common.days")]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("notifications.daysBeforeWarranty")}),e.jsxs("select",{value:s.warranty_alert_days,onChange:a=>o(n=>({...n,warranty_alert_days:a.target.value})),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsxs("option",{value:"14",children:["14 ",t("common.days")]}),e.jsxs("option",{value:"30",children:["30 ",t("common.days")]}),e.jsxs("option",{value:"60",children:["60 ",t("common.days")]}),e.jsxs("option",{value:"90",children:["90 ",t("common.days")]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:t("notifications.testEmail")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"email",value:l,onChange:a=>j(a.target.value),placeholder:t("notifications.enterEmailToTest"),className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),e.jsxs("button",{onClick:N,disabled:!l||p,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 flex items-center gap-2",children:[p?e.jsx(g,{size:"sm"}):e.jsx($,{className:"h-4 w-4"}),t("notifications.sendTest")]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:k,disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[x?e.jsx(g,{size:"sm"}):e.jsx(f,{className:"h-4 w-4"}),t("common.save")]})})]})};export{ee as default};
