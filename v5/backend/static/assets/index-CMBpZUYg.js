import{j as e}from"./vendor-ui-CHMJddlm.js";import{u as I,r as o}from"./vendor-react-B7WRoy5K.js";import{u as R,a as z,L as B,I as j,b as D,c as E,d as i,e as T,f as P,g as $,h as M,i as K,j as O}from"./index-DJ2euB44.js";import{R as m,P as y,a as k,C as g,T as h,B as U,X as W,Y as X,b as Y}from"./vendor-charts-C5vizwv2.js";const N={Operacional:"#00C853","Manutencao Necessaria":"#FFB300",Manutencao:"#FFB300","Em Reparação":"#FF9100",Avariado:"#FF5252",Desativado:"#78909C",em_curso:"#00A0DC",concluida:"#00C853",cancelada:"#FF5252",pendente:"#FFB300",preventiva:"#00C853",corretiva:"#FFB300",substituicao:"#00A0DC",inspecao:"#7C4DFF",default:"#90A4AE"},b=s=>N[s]||N.default,J=()=>{var u,v,f;const{t:s}=R(),l=I(),[r,w]=o.useState(null),[C,F]=o.useState(!0),[p,S]=o.useState("");o.useEffect(()=>{L()},[]);const L=async()=>{try{const a=await z.get("/dashboard/stats");w(a)}catch(a){S(a.message||s("errors.SERVER_ERROR"))}finally{F(!1)}};if(C)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(B,{size:"lg"})});if(p)return e.jsx("div",{className:"p-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 rounded-2xl",children:p});const _=[{label:s("dashboard.totalAssets"),value:(r==null?void 0:r.total_assets)||0,icon:j,gradient:"from-slp-cyan to-slp-blue-bright",bgLight:"bg-slp-cyan/10",link:"/assets"},{label:s("dashboard.thisMonth"),value:(r==null?void 0:r.recent_assets)||0,icon:D,gradient:"from-emerald-400 to-emerald-600",bgLight:"bg-emerald-500/10",link:"/assets"},{label:s("navigation.users"),value:(r==null?void 0:r.total_users)||0,icon:E,gradient:"from-violet-400 to-violet-600",bgLight:"bg-violet-500/10",link:"/users"},{label:s("dashboard.pendingInterventions"),value:(r==null?void 0:r.open_interventions)||0,icon:i,gradient:"from-amber-400 to-orange-500",bgLight:"bg-amber-500/10",link:"/interventions"}],n=((u=r==null?void 0:r.assets_by_status)==null?void 0:u.map(a=>({name:a.status||s("common.noData"),value:a.count,fill:b(a.status)})))||[],c=((v=r==null?void 0:r.interventions_by_type)==null?void 0:v.map(a=>({name:s(`interventions.types.${a.type}`)||a.type,value:a.count,fill:b(a.type)})))||[],d=((f=r==null?void 0:r.interventions_by_status)==null?void 0:f.map(a=>({name:a.status==="em_curso"?s("interventions.statuses.inProgress"):a.status==="concluida"?s("interventions.statuses.completed"):a.status==="cancelada"?s("interventions.statuses.cancelled"):a.status,value:a.count,fill:b(a.status)})))||[],x=({active:a,payload:t})=>a&&t&&t.length?e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:t[0].name}),e.jsx("p",{className:"text-2xl font-bold text-slp-blue-bright",children:t[0].value})]}):null;return e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slp-navy dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-slp-cyan to-slp-blue-bright",children:e.jsx(P,{size:24,className:"text-white"})}),s("dashboard.title")]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:s("dashboard.overview")})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:_.map((a,t)=>{const A=a.icon;return e.jsxs("div",{onClick:()=>l(a.link),className:"group bg-white dark:bg-gray-800/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 p-6 cursor-pointer hover:shadow-xl hover:shadow-slp-navy/5 dark:hover:shadow-black/20 transition-all duration-300 hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:a.label}),e.jsx("p",{className:"text-3xl font-bold text-slp-navy dark:text-white",children:a.value.toLocaleString()})]}),e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${a.gradient} shadow-lg group-hover:scale-110 transition-transform duration-300`,children:e.jsx(A,{size:24,className:"text-white"})})]}),e.jsx("div",{className:"mt-4 h-1 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${a.gradient} rounded-full transition-all duration-500`,style:{width:`${Math.min(100,a.value/((r==null?void 0:r.total_assets)||1)*100)}%`}})})]},t)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slp-navy/10 dark:bg-slp-cyan/20",children:e.jsx(j,{size:20,gradient:!0,className:"text-slp-navy dark:text-slp-cyan"})}),e.jsx("h2",{className:"text-lg font-semibold text-slp-navy dark:text-white",children:s("reports.assetsByStatus")})]}),e.jsx("div",{className:"h-64",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(y,{children:[e.jsx(k,{data:n,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:3,dataKey:"value",strokeWidth:0,children:n.map((a,t)=>e.jsx(g,{fill:a.fill},`cell-${t}`))}),e.jsx(h,{content:e.jsx(x,{})})]})})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:n.map((a,t)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:a.fill}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",a.value,")"]})]},t))})]}),c.length>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 dark:bg-amber-500/20",children:e.jsx(i,{size:20,className:"text-amber-600 dark:text-amber-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-slp-navy dark:text-white",children:s("reports.interventionsByType")})]}),e.jsx("div",{className:"h-64",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(U,{data:c,layout:"vertical",children:[e.jsx(W,{type:"number",axisLine:!1,tickLine:!1}),e.jsx(X,{dataKey:"name",type:"category",width:100,tick:{fontSize:12,fill:"#64748b"},axisLine:!1,tickLine:!1}),e.jsx(h,{content:e.jsx(x,{})}),e.jsx(Y,{dataKey:"value",radius:[0,8,8,0],children:c.map((a,t)=>e.jsx(g,{fill:a.fill},`cell-${t}`))})]})})})]}):d.length>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 dark:bg-amber-500/20",children:e.jsx(i,{size:20,className:"text-amber-600 dark:text-amber-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-slp-navy dark:text-white",children:s("reports.interventionsByStatus")})]}),e.jsx("div",{className:"h-64",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(y,{children:[e.jsx(k,{data:d,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:3,dataKey:"value",strokeWidth:0,children:d.map((a,t)=>e.jsx(g,{fill:a.fill},`cell-${t}`))}),e.jsx(h,{content:e.jsx(x,{})})]})})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:d.map((a,t)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:a.fill}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",a.value,")"]})]},t))})]}):null]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slp-navy/10 dark:bg-slp-cyan/20",children:e.jsx($,{size:20,gradient:!0})}),e.jsx("h2",{className:"text-lg font-semibold text-slp-navy dark:text-white",children:s("dashboard.quickActions")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>l("/assets/new"),className:"group flex items-center gap-4 p-5 bg-gradient-to-br from-slp-cyan/5 to-slp-blue-bright/10 dark:from-slp-cyan/10 dark:to-slp-blue-bright/20 hover:from-slp-cyan/10 hover:to-slp-blue-bright/20 dark:hover:from-slp-cyan/20 dark:hover:to-slp-blue-bright/30 rounded-xl border border-slp-cyan/20 dark:border-slp-cyan/30 transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-slp-cyan to-slp-blue-bright rounded-xl shadow-lg shadow-slp-cyan/30 group-hover:scale-110 transition-transform",children:e.jsx(M,{size:20,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-slp-navy dark:text-white block",children:s("assets.newAsset")}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("assets.create")})]})]}),e.jsxs("button",{onClick:()=>l("/interventions/new"),className:"group flex items-center gap-4 p-5 bg-gradient-to-br from-amber-500/5 to-orange-500/10 dark:from-amber-500/10 dark:to-orange-500/20 hover:from-amber-500/10 hover:to-orange-500/20 dark:hover:from-amber-500/20 dark:hover:to-orange-500/30 rounded-xl border border-amber-500/20 dark:border-amber-500/30 transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl shadow-lg shadow-amber-500/30 group-hover:scale-110 transition-transform",children:e.jsx(i,{size:20,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-slp-navy dark:text-white block",children:s("interventions.newIntervention")}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("interventions.create")})]})]}),e.jsxs("button",{onClick:()=>l("/map"),className:"group flex items-center gap-4 p-5 bg-gradient-to-br from-emerald-500/5 to-emerald-600/10 dark:from-emerald-500/10 dark:to-emerald-600/20 hover:from-emerald-500/10 hover:to-emerald-600/20 dark:hover:from-emerald-500/20 dark:hover:to-emerald-600/30 rounded-xl border border-emerald-500/20 dark:border-emerald-500/30 transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-xl shadow-lg shadow-emerald-500/30 group-hover:scale-110 transition-transform",children:e.jsx(K,{size:20,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-slp-navy dark:text-white block",children:s("navigation.map")}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("map.viewAssets")})]})]}),e.jsxs("button",{onClick:()=>l("/reports"),className:"group flex items-center gap-4 p-5 bg-gradient-to-br from-violet-500/5 to-violet-600/10 dark:from-violet-500/10 dark:to-violet-600/20 hover:from-violet-500/10 hover:to-violet-600/20 dark:hover:from-violet-500/20 dark:hover:to-violet-600/30 rounded-xl border border-violet-500/20 dark:border-violet-500/30 transition-all duration-300",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-violet-400 to-violet-600 rounded-xl shadow-lg shadow-violet-500/30 group-hover:scale-110 transition-transform",children:e.jsx(O,{size:20,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-slp-navy dark:text-white block",children:s("navigation.reports")}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("reports.view")})]})]})]})]})]})]})};export{J as default};
