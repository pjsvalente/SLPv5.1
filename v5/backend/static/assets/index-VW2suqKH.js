const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FieldCatalog-DGZ8EkMU.js","assets/vendor-ui-CHMJddlm.js","assets/vendor-react-B7WRoy5K.js","assets/index-COtvopzD.js","assets/vendor-charts-C5vizwv2.js","assets/index-CfKKdQQn.css","assets/FormField-CL0mbYrX.js","assets/ConfirmDialog-DIC2p10R.js","assets/FieldConfig-CToN_pL5.js","assets/BackupSettings-BX6hy2cI.js","assets/AuditLog-DMI0uGGT.js","assets/NotificationSettings-DZKkUD8H.js","assets/PrivacySettings-DF5zF9aI.js","assets/FavoritesSettings-CLf9du8P.js","assets/MenuOrderSettings-I9fmgPFf.js"])))=>i.map(i=>d[i]);
import{u as w,E as D,F as E,G as I,H as L,J as A,K as F,M as O,N as T,B as q,O as R,P as z,n as $,Q as M,l as d,a as v,r as C,_ as N,h as k,C as P}from"./index-COtvopzD.js";import{j as e}from"./vendor-ui-CHMJddlm.js";import{r as a}from"./vendor-react-B7WRoy5K.js";import{F as y}from"./FormField-CL0mbYrX.js";import{C as V}from"./ConfirmDialog-DIC2p10R.js";import"./vendor-charts-C5vizwv2.js";const B=a.lazy(()=>N(()=>import("./FieldCatalog-DGZ8EkMU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),H=a.lazy(()=>N(()=>import("./FieldConfig-CToN_pL5.js"),__vite__mapDeps([8,1,2,3,4,5]))),K=a.lazy(()=>N(()=>import("./BackupSettings-BX6hy2cI.js"),__vite__mapDeps([9,1,2,3,4,5,7]))),U=a.lazy(()=>N(()=>import("./AuditLog-DMI0uGGT.js"),__vite__mapDeps([10,1,2,3,4,5]))),G=a.lazy(()=>N(()=>import("./NotificationSettings-DZKkUD8H.js"),__vite__mapDeps([11,1,2,3,4,5]))),J=a.lazy(()=>N(()=>import("./PrivacySettings-DF5zF9aI.js"),__vite__mapDeps([12,1,2,3,4,5]))),Q=a.lazy(()=>N(()=>import("./FavoritesSettings-CLf9du8P.js"),__vite__mapDeps([13,1,2,3,4,5]))),W=a.lazy(()=>N(()=>import("./MenuOrderSettings-I9fmgPFf.js"),__vite__mapDeps([14,1,2,3,4,5]))),X=({active:s,onClick:r,icon:n,label:x})=>e.jsxs("button",{onClick:r,className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${s?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n,x]}),Y=()=>{const{t:s}=w(),[r,n]=a.useState({}),[x,f]=a.useState(!0),[g,c]=a.useState(!1),[p,m]=a.useState({type:"",text:""});a.useEffect(()=>{u()},[]);const u=async()=>{try{const t=await v.get("/settings/prefixes");n(t)}catch(t){m({type:"error",text:t.message})}finally{f(!1)}},j=async()=>{c(!0);try{await v.put("/settings/prefixes",r),m({type:"success",text:s("settings.saved")})}catch(t){m({type:"error",text:t.message})}finally{c(!1)}},l=(t,h)=>{n(b=>({...b,[t]:h}))};return x?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.prefixesDescription")}),p.text&&e.jsx("div",{className:`p-4 rounded-lg ${p.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:p.text}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{label:s("settings.assetPrefix"),name:"assets",type:"text",value:r.assets||"",onChange:t=>l("assets",String(t)),helpText:"Ex: SLP"}),e.jsx(y,{label:s("settings.assetDigits"),name:"assets_digits",type:"number",value:r.assets_digits||"",onChange:t=>l("assets_digits",String(t)),helpText:`${s("settings.digits")} (ex: 9)`}),e.jsx(y,{label:s("settings.preventivePrefix"),name:"int_preventiva",type:"text",value:r.int_preventiva||"",onChange:t=>l("int_preventiva",String(t))}),e.jsx(y,{label:s("settings.correctivePrefix"),name:"int_corretiva",type:"text",value:r.int_corretiva||"",onChange:t=>l("int_corretiva",String(t))}),e.jsx(y,{label:s("settings.replacementPrefix"),name:"int_substituicao",type:"text",value:r.int_substituicao||"",onChange:t=>l("int_substituicao",String(t))}),e.jsx(y,{label:s("settings.inspectionPrefix"),name:"int_inspecao",type:"text",value:r.int_inspecao||"",onChange:t=>l("int_inspecao",String(t))}),e.jsx(y,{label:s("settings.interventionDigits"),name:"int_digits",type:"number",value:r.int_digits||"",onChange:t=>l("int_digits",String(t))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:j,disabled:g,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[g?e.jsx(d,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(C,{className:"h-4 w-4 mr-2"}),s("common.save")]})})]})},Z=()=>{const{t:s}=w(),[r,n]=a.useState([]),[x,f]=a.useState(""),[g,c]=a.useState(!0),[p,m]=a.useState(!1),[u,j]=a.useState({type:"",text:""});a.useEffect(()=>{l()},[]);const l=async()=>{try{const o=await v.get("/settings/colors");n(o.colors||[])}catch(o){j({type:"error",text:o.message})}finally{c(!1)}},t=async()=>{m(!0);try{await v.put("/settings/colors",{colors:r}),j({type:"success",text:s("settings.saved")})}catch(o){j({type:"error",text:o.message})}finally{m(!1)}},h=()=>{x&&!r.includes(x)&&(n([...r,x]),f(""))},b=o=>{n(r.filter((_,i)=>i!==o))};return g?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.colorsDescription")}),u.text&&e.jsx("div",{className:`p-4 rounded-lg ${u.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:u.text}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:o=>f(o.target.value),placeholder:s("settings.newColor"),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",onKeyPress:o=>o.key==="Enter"&&h()}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:e.jsx(k,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map((o,_)=>e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-full",children:[e.jsx("span",{className:"text-sm",children:o}),e.jsx("button",{onClick:()=>b(_),className:"text-gray-400 hover:text-red-500",children:e.jsx(P,{className:"h-4 w-4"})})]},_))}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:t,disabled:p,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[p?e.jsx(d,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(C,{className:"h-4 w-4 mr-2"}),s("common.save")]})})]})},ee=()=>{const{t:s}=w(),[r,n]=a.useState([]),[x,f]=a.useState(!0),[g,c]=a.useState(null),[p,m]=a.useState({type:"",text:""});a.useEffect(()=>{u()},[]);const u=async()=>{try{const t=await v.get("/settings/counters");n(t.counters||[])}catch(t){m({type:"error",text:t.message})}finally{f(!1)}},j=async(t,h)=>{c(t);try{await v.put(`/settings/counters/${t}`,{value:h}),m({type:"success",text:s("settings.counterUpdated")}),u()}catch(b){m({type:"error",text:b.message})}finally{c(null)}},l={assets:s("navigation.assets"),int_preventiva:s("settings.preventivePrefix"),int_corretiva:s("settings.correctivePrefix"),int_substituicao:s("settings.replacementPrefix"),int_inspecao:s("settings.inspectionPrefix")};return x?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.countersDescription")}),p.text&&e.jsx("div",{className:`p-4 rounded-lg ${p.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:p.text}),e.jsx("div",{className:"space-y-4",children:r.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l[t.counter_type]||t.counter_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s("settings.next"),": ",t.current_value+1]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:t.current_value,onChange:h=>{const b=r.map(o=>o.counter_type===t.counter_type?{...o,current_value:parseInt(h.target.value)||0}:o);n(b)},className:"w-24 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-center"}),e.jsx("button",{onClick:()=>j(t.counter_type,t.current_value),disabled:g===t.counter_type,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g===t.counter_type?e.jsx(d,{className:"h-4 w-4 animate-spin"}):s("common.update")})]})]},t.counter_type))})]})},se=()=>{const{t:s}=w(),[r,n]=a.useState([]),[x,f]=a.useState(!0),[g,c]=a.useState({type:"",text:""}),[p,m]=a.useState(!1),[u,j]=a.useState(null),[l,t]=a.useState({field_name:"",field_type:"text",field_label:"",required:!1,field_category:"other"});a.useEffect(()=>{h()},[]);const h=async()=>{try{const i=await v.get("/settings/schema");n(i.fields||[])}catch(i){c({type:"error",text:i.message})}finally{f(!1)}},b=async()=>{try{await v.post("/settings/schema",l),m(!1),t({field_name:"",field_type:"text",field_label:"",required:!1,field_category:"other"}),h(),c({type:"success",text:s("settings.fieldAdded")})}catch(i){c({type:"error",text:i.message})}},o=async i=>{try{await v.delete(`/settings/schema/${i}`),j(null),h(),c({type:"success",text:s("settings.fieldDeleted")})}catch(S){c({type:"error",text:S.message})}},_={identification:s("settings.categories.identification"),specifications:s("settings.categories.specifications"),installation:s("settings.categories.installation"),warranty:s("settings.categories.warranty"),maintenance:s("settings.categories.maintenance"),equipment:s("settings.categories.equipment"),other:s("settings.categories.other")};return x?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("settings.schemaDescription")}),e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),s("settings.newField")]})]}),g.text&&e.jsx("div",{className:`p-4 rounded-lg ${g.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:g.text}),e.jsx("div",{className:"space-y-2",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:i.field_label}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i.field_name," | ",i.field_type," | ",_[i.field_category]||i.field_category,i.required?` | ${s("common.required")}`:""]})]}),e.jsx("button",{onClick:()=>j(i.id),className:"p-2 text-gray-400 hover:text-red-500",children:e.jsx(P,{className:"h-5 w-5"})})]},i.id))}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("settings.newField")}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{label:s("settings.fieldName"),name:"field_name",value:l.field_name,onChange:i=>t({...l,field_name:String(i)}),required:!0}),e.jsx(y,{label:s("settings.fieldLabel"),name:"field_label",value:l.field_label,onChange:i=>t({...l,field_label:String(i)}),required:!0}),e.jsx(y,{label:s("common.type"),name:"field_type",type:"select",value:l.field_type,onChange:i=>t({...l,field_type:String(i)}),options:["text","number","date","select","textarea"]}),e.jsx(y,{label:s("common.category"),name:"field_category",type:"select",value:l.field_category,onChange:i=>t({...l,field_category:String(i)}),options:Object.entries(_).map(([i,S])=>({value:i,label:S}))}),e.jsx(y,{label:s("common.required"),name:"required",type:"checkbox",value:l.required,onChange:i=>t({...l,required:!!i})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:s("common.cancel")}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:s("common.add")})]})]})}),e.jsx(V,{isOpen:u!==null,onClose:()=>j(null),onConfirm:()=>u&&o(u),title:s("settings.deleteField"),message:s("settings.deleteFieldConfirm"),confirmText:s("common.delete"),variant:"danger"})]})},ce=()=>{const{t:s}=w(),{user:r}=D(),[n,x]=a.useState("prefixes"),f=(r==null?void 0:r.role)==="superadmin",g=[{id:"prefixes",label:s("settings.prefixes"),icon:e.jsx(E,{className:"h-4 w-4"})},{id:"menuOrder",label:s("settings.menuOrder")||"Menus",icon:e.jsx(I,{className:"h-4 w-4"})},{id:"favorites",label:s("settings.favorites")||"Favoritos",icon:e.jsx(L,{className:"h-4 w-4"})},{id:"colors",label:s("settings.colors"),icon:e.jsx(A,{className:"h-4 w-4"})},{id:"counters",label:s("settings.counters"),icon:e.jsx(F,{className:"h-4 w-4"})},{id:"fields",label:s("settings.fieldConfig")||"Campos",icon:e.jsx(O,{className:"h-4 w-4"})},{id:"notifications",label:s("notifications.title")||"Notificações",icon:e.jsx(T,{className:"h-4 w-4"})},{id:"privacy",label:s("privacy.title")||"Privacidade",icon:e.jsx(q,{className:"h-4 w-4"})},{id:"backup",label:s("backup.title")||"Backup",icon:e.jsx(R,{className:"h-4 w-4"})},{id:"audit",label:s("auditLog.title")||"Audit Log",icon:e.jsx(z,{className:"h-4 w-4"})},{id:"schema",label:s("settings.schema"),icon:e.jsx($,{className:"h-4 w-4"})}];return f&&g.splice(5,0,{id:"catalog",label:s("settings.fieldCatalog")||"Catálogo",icon:e.jsx(M,{className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s("settings.title")}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:g.map(c=>e.jsx(X,{active:n===c.id,onClick:()=>x(c.id),icon:c.icon,label:c.label},c.id))})}),e.jsxs("div",{className:"p-6",children:[n==="prefixes"&&e.jsx(Y,{}),n==="menuOrder"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(W,{})}),n==="favorites"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(Q,{})}),n==="colors"&&e.jsx(Z,{}),n==="counters"&&e.jsx(ee,{}),n==="fields"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(H,{})}),n==="catalog"&&f&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(B,{})}),n==="notifications"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(G,{})}),n==="privacy"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(J,{})}),n==="backup"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(K,{})}),n==="audit"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(d,{className:"h-8 w-8 animate-spin"})}),children:e.jsx(U,{})}),n==="schema"&&e.jsx(se,{})]})]})]})};export{ce as default};
