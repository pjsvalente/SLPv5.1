import{j as e}from"./vendor-ui-CHMJddlm.js";import{r as d,u as Q,i as ae,e as re,f as G}from"./vendor-react-B7WRoy5K.js";import{u as O,k as le,a as E,l as K,m as Z,n as ne,o as H,p as ie,q as oe,r as te,s as J,t as Y,v as ce,i as de,d as me,w as xe,x as ge,y as ue,z as pe,e as he,I as be,h as ye}from"./index-Dn-ozWxe.js";import{D as fe}from"./DataTable-D2OHuEfZ.js";import{S as P}from"./StatusBadge-o9yk1S5Z.js";import{F as ee}from"./FormField-CgyOL_Jt.js";import{u as je}from"./useApi-DGeimb8Y.js";import{C as Ne}from"./ConfirmDialog-C6LMKA7_.js";import"./vendor-charts-C5vizwv2.js";function _e({onComplete:a,onCancel:f,initialColumn:g}){const{t:o}=O(),s=je(),[i,p]=d.useState(1),[x,m]=d.useState(!1),[u,S]=d.useState([]),[h,j]=d.useState(""),[y,w]=d.useState(null),[v,A]=d.useState(null),[N,c]=d.useState({luminaire_id:null,electrical_panel_id:null,fuse_box_id:null,telemetry_id:null,ev_charger_id:null,mupi_id:null,lateral_id:null,antenna_id:null}),[_,C]=d.useState(null),M=Array.from(new Set(u.map(t=>t.pack))).sort();d.useEffect(()=>{U()},[]),d.useEffect(()=>{if(g&&u.length>0){const t=u.find(n=>n.id===g);t&&(j(t.pack),w(t))}},[g,u]),d.useEffect(()=>{y&&I(y.id)},[y]),d.useEffect(()=>{i===3&&(N.electrical_panel_id||N.fuse_box_id)&&$()},[i,N]);const U=async()=>{m(!0);try{const t=await s.get("/catalog/columns");S(t.items||[])}catch(t){console.error("Error loading columns:",t)}finally{m(!1)}},I=async t=>{m(!0);try{const n=await s.get(`/catalog/compatible-modules/${t}`);A(n)}catch(n){console.error("Error loading compatible modules:",n)}finally{m(!1)}},$=async()=>{try{const t=await s.post("/catalog/calculate-power",N);C(t)}catch(t){console.error("Error calculating power:",t)}},W=()=>{i<3&&p(i+1)},L=()=>{i>1&&p(i-1)},R=()=>{!y||!_||a({column_reference:y.reference,column_id:y.id,pack:y.pack,height_m:y.height_m,modules:N,power_calculation:_})},B=()=>{switch(i){case 1:return y!==null;case 2:return N.electrical_panel_id!==null||N.fuse_box_id!==null;case 3:return _!==null&&_.is_valid;default:return!1}},F=h?u.filter(t=>t.pack===h):u;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:o("configurator.title","Reference Configurator")}),e.jsx("p",{className:"text-sm text-gray-500",children:o("configurator.subtitle","Configure your lamppost reference")})]}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 ${t<i?"bg-green-500 border-green-500 text-white":t===i?"border-blue-500 text-blue-500":"border-gray-300 text-gray-300"}`,children:t<i?e.jsx(Check,{className:"w-4 h-4"}):t}),e.jsxs("span",{className:`ml-2 text-sm font-medium ${t===i?"text-blue-600":"text-gray-500"}`,children:[t===1&&o("configurator.step1","Select Column"),t===2&&o("configurator.step2","Select Modules"),t===3&&o("configurator.step3","Summary")]}),t<3&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${t<i?"bg-green-500":"bg-gray-200"}`})]},t))})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(RefreshCw,{className:"w-8 h-8 animate-spin text-blue-500"})}):e.jsxs(e.Fragment,{children:[i===1&&e.jsx(we,{packs:M,columns:F,selectedPack:h,selectedColumn:y,onPackChange:j,onColumnChange:w}),i===2&&v&&e.jsx(ve,{column:y,compatibleModules:v,selectedModules:N,onModulesChange:c}),i===3&&e.jsx(ke,{column:y,selectedModules:N,compatibleModules:v,powerCalc:_})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[e.jsxs("button",{onClick:i===1?f:L,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(ChevronLeft,{className:"w-4 h-4"}),o(i===1?"common.cancel":"common.back")]}),i<3?e.jsxs("button",{onClick:W,disabled:!B(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[o("common.next"),e.jsx(ChevronRight,{className:"w-4 h-4"})]}):e.jsxs("button",{onClick:R,disabled:!B(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Check,{className:"w-4 h-4"}),o("configurator.apply","Apply Configuration")]})]})]})})}function we({packs:a,columns:f,selectedPack:g,selectedColumn:o,onPackChange:s,onColumnChange:i}){const{t:p}=O(),x=[{key:"mod1",icon:Lightbulb,label:p("catalog.moduleLuminaire")},{key:"mod2",icon:Zap,label:p("catalog.moduleElectrical")},{key:"mod3",icon:Box,label:p("catalog.moduleFuseBox")},{key:"mod4",icon:Radio,label:p("catalog.moduleTelemetry")},{key:"mod5",icon:Car,label:p("catalog.moduleEV")},{key:"mod6",icon:Monitor,label:p("catalog.moduleMUPI")},{key:"mod7",icon:PanelLeft,label:p("catalog.moduleLateral")},{key:"mod8",icon:Antenna,label:p("catalog.moduleAntenna")}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:p("catalog.pack")}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>s(""),className:`px-4 py-2 rounded-lg border transition-colors ${g===""?"bg-blue-50 border-blue-500 text-blue-600":"border-gray-300 hover:border-gray-400"}`,children:p("common.all")}),a.map(m=>e.jsx("button",{onClick:()=>s(m),className:`px-4 py-2 rounded-lg border transition-colors ${g===m?"bg-blue-50 border-blue-500 text-blue-600":"border-gray-300 hover:border-gray-400"}`,children:e.jsx(P,{status:m,colorMap:{BAREBONE:"gray",CORE:"blue",ESSENCIAL:"green",PREMIUM:"purple"}})},m))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[p("catalog.columns")," (",f.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-80 overflow-y-auto",children:f.map(m=>e.jsxs("div",{onClick:()=>i(m),className:`p-4 border rounded-lg cursor-pointer transition-all ${(o==null?void 0:o.id)===m.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-500":"border-gray-200 hover:border-gray-300 dark:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-mono font-semibold text-blue-600",children:m.reference}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m.description})]}),e.jsx(P,{status:m.pack,colorMap:{BAREBONE:"gray",CORE:"blue",ESSENCIAL:"green",PREMIUM:"purple"}})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-600",children:[e.jsxs("span",{children:[m.height_m,"m"]}),e.jsxs("span",{children:[m.arm_count," ",p("catalog.arms")]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:x.map(u=>{if(!m[u.key])return null;const h=u.icon;return e.jsx("span",{title:u.label,className:"p-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded",children:e.jsx(h,{className:"w-3 h-3"})},u.key)})})]},m.id))})]})]})}function ve({column:a,compatibleModules:f,selectedModules:g,onModulesChange:o}){const{t:s}=O(),i=[{key:"electrical_panel_id",data:"electrical_panels",label:s("catalog.electricalPanels"),icon:Zap,mod:"mod2",powerKey:"max_power_total"},{key:"fuse_box_id",data:"fuse_boxes",label:s("catalog.fuseBoxes"),icon:Box,mod:"mod3",powerKey:"max_power"},{key:"luminaire_id",data:"luminaires",label:s("catalog.luminaires"),icon:Lightbulb,mod:"mod1",powerKey:"power_w"},{key:"telemetry_id",data:"telemetry",label:s("catalog.telemetry"),icon:Radio,mod:"mod4",powerKey:"power_consumption_w"},{key:"ev_charger_id",data:"ev_chargers",label:s("catalog.evChargers"),icon:Car,mod:"mod5",powerKey:"power_kw",unit:"kW"},{key:"mupi_id",data:"mupi",label:s("catalog.mupiModules"),icon:Monitor,mod:"mod6",powerKey:"power_consumption_w"},{key:"lateral_id",data:"lateral",label:s("catalog.lateralModules"),icon:PanelLeft,mod:"mod7",powerKey:"power_consumption_w"},{key:"antenna_id",data:"antennas",label:s("catalog.antennas"),icon:Antenna,mod:"mod8",powerKey:"power_consumption_w"}],p=(x,m)=>{o({...g,[x]:m})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Columns,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-mono font-semibold",children:a.reference}),e.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),e.jsxs("span",{className:"text-gray-600",children:[a.height_m,"m"]}),e.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),e.jsx(P,{status:a.pack,colorMap:{BAREBONE:"gray",CORE:"blue",ESSENCIAL:"green",PREMIUM:"purple"}})]})]})}),e.jsx("div",{className:"space-y-4",children:i.map(x=>{const m=a[x.mod],u=f[x.data]||[],S=x.icon,h=g[x.key];return m?e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:x.label}),u.length===0&&e.jsxs("span",{className:"text-sm text-gray-400 ml-2",children:["(",s("common.noData"),")"]})]}),u.length>0&&e.jsx("div",{className:"p-3 max-h-40 overflow-y-auto",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:`flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${h===null?"bg-gray-100 dark:bg-gray-600":""}`,children:[e.jsx("input",{type:"radio",name:x.key,checked:h===null,onChange:()=>p(x.key,null),className:"text-blue-600"}),e.jsx("span",{className:"text-gray-500",children:s("common.none")})]}),u.map(j=>{const y=j[x.powerKey]||0,w=x.unit||"W";return e.jsxs("label",{className:`flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${h===j.id?"bg-blue-50 dark:bg-blue-900/20 border border-blue-500":""}`,children:[e.jsx("input",{type:"radio",name:x.key,checked:h===j.id,onChange:()=>p(x.key,j.id),className:"text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-mono text-sm",children:j.reference}),j.manufacturer&&e.jsxs("span",{className:"text-gray-400 text-sm ml-2",children:["(",j.manufacturer,")"]})]}),y>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:[y,w]})]},j.id)})]})})]},x.key):null})}),!g.electrical_panel_id&&!g.fuse_box_id&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 rounded-lg",children:[e.jsx(AlertTriangle,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:s("configurator.selectPowerSource","Select an Electrical Panel or Fuse Box as power source")})]})]})}function ke({column:a,selectedModules:f,compatibleModules:g,powerCalc:o}){const{t:s}=O(),i=(x,m)=>{const u=f[x];if(!u)return null;const h=(g[m]||[]).find(j=>j.id===u);return(h==null?void 0:h.reference)||null},p=[{label:s("catalog.luminaire"),ref:i("luminaire_id","luminaires"),icon:Lightbulb},{label:s("catalog.electricalPanel"),ref:i("electrical_panel_id","electrical_panels"),icon:Zap},{label:s("catalog.fuseBox"),ref:i("fuse_box_id","fuse_boxes"),icon:Box},{label:s("catalog.telemetryPanel"),ref:i("telemetry_id","telemetry"),icon:Radio},{label:s("catalog.evCharger"),ref:i("ev_charger_id","ev_chargers"),icon:Car},{label:s("catalog.mupiModule"),ref:i("mupi_id","mupi"),icon:Monitor},{label:s("catalog.lateralModule"),ref:i("lateral_id","lateral"),icon:PanelLeft},{label:s("catalog.antenna"),ref:i("antenna_id","antennas"),icon:Antenna}].filter(x=>x.ref);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Columns,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-mono text-lg font-semibold",children:a.reference}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.description," • ",a.height_m,"m • ",a.arm_count," ",s("catalog.arms")]})]}),e.jsx(P,{status:a.pack,colorMap:{BAREBONE:"gray",CORE:"blue",ESSENCIAL:"green",PREMIUM:"purple"}})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:s("configurator.selectedModules","Selected Modules")}),e.jsx("div",{className:"space-y-2",children:p.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:s("configurator.noModulesSelected","No modules selected")}):p.map((x,m)=>{const u=x.icon;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(u,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-600",children:x.label}),e.jsx(ArrowRight,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-mono font-medium",children:x.ref})]},m)})})]}),o&&e.jsxs("div",{className:`p-4 rounded-lg border-2 ${o.is_valid?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-red-500 bg-red-50 dark:bg-red-900/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Calculator,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-medium",children:s("configurator.electricalBalance","Electrical Balance")}),o.is_valid?e.jsx(CheckCircle,{className:"w-5 h-5 text-green-600 ml-auto"}):e.jsx(XCircle,{className:"w-5 h-5 text-red-600 ml-auto"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:s("configurator.maxPower","Max Power")}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.max_power,"W"]}),e.jsx("p",{className:"text-xs text-gray-500",children:o.power_source})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:s("configurator.installedPower","Installed")}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.installed_power,"W"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:s("configurator.remainingPower","Remaining")}),e.jsxs("p",{className:`text-2xl font-bold ${o.remaining_power<0?"text-red-600":"text-green-600"}`,children:[o.remaining_power,"W"]})]})]}),o.connection_type&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[s("catalog.phases"),": "]}),e.jsx("span",{className:"font-medium",children:o.connection_type})]}),!o.is_valid&&e.jsxs("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-300",children:[e.jsx(AlertTriangle,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:s("configurator.powerExceeded","Installed power exceeds maximum capacity!")})]}),o.modules&&o.modules.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s("configurator.powerBreakdown","Power Breakdown"),":"]}),e.jsx("div",{className:"space-y-1",children:o.modules.map((x,m)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:x.name}),e.jsxs("span",{className:"font-mono",children:[x.power,"W"]})]},m))})]})]})]})}function se({mode:a}){const f=Q(),{serialNumber:g}=ae(),{i18n:o,t:s}=O(),i=le(),[p,x]=d.useState(!1),[m,u]=d.useState(!1),[S,h]=d.useState(""),[j,y]=d.useState([]),[w,v]=d.useState({serial_number:""}),[A,N]=d.useState(!1),[c,_]=d.useState(null);d.useEffect(()=>{C(),a==="edit"&&g?U():a==="create"&&M()},[a,g,o.language]);const C=async()=>{try{const t=await E.get(`/settings/fields/active?lang=${o.language}`);y(t.fields||[])}catch(t){console.error("Error loading schema:",t);try{const n=await E.get("/assets/schema");y(Array.isArray(n)?n:n.fields||[])}catch(n){console.error("Error loading schema (fallback):",n)}}},M=async()=>{try{const t=await E.get("/assets/next-number");v(n=>({...n,serial_number:t.next_number||""}))}catch(t){console.error("Error loading next number:",t)}},U=async()=>{x(!0);try{const t=await E.get(`/assets/${g}`),n={serial_number:t.serial_number};Object.keys(t).forEach(l=>{l!=="id"&&l!=="serial_number"&&l!=="created_at"&&l!=="updated_at"&&l!=="created_by"&&l!=="updated_by"&&l!=="status_history"&&(n[l]=t[l])}),n.gps_latitude&&n.gps_longitude&&(n.gps_coordinates=`${n.gps_latitude}, ${n.gps_longitude}`),v(n)}catch(t){h(t.message||s("errors.ASSET_NOT_FOUND"))}finally{x(!1)}},I=(t,n)=>{v(l=>({...l,[t]:n})),h("")},$=t=>{var l;_(t),N(!1);const n={...w};n.product_reference=t.column_reference,t.height_m&&(n.height_meters=t.height_m),t.power_calculation&&(n.electrical_max_power=t.power_calculation.max_power,n.total_installed_power=t.power_calculation.installed_power,n.remaining_power=t.power_calculation.remaining_power,n.electrical_connection_type=t.power_calculation.connection_type),(l=t.power_calculation)!=null&&l.installed_power&&(n.power_watts=t.power_calculation.installed_power),v(n),i.success(s("configurator.apply"))},W=async()=>{if((w.condition_status||w.status)==="Operacional"){const l=["rfid_tag","manufacturer","model"].filter(k=>{var b;return!((b=w[k])!=null&&b.toString().trim())});if(l.length>0){const k={rfid_tag:"RFID Tag",manufacturer:s("assets.manufacturer")||"Fabricante",model:s("assets.model")||"Modelo"},b=l.map(T=>k[T]).join(", ");throw new Error(`Para estado Operacional, preencha: ${b}`)}}return!0},L=async t=>{t.preventDefault(),u(!0),h("");try{await W();const{serial_number:n,...l}=w;c&&(l.catalog_column_id=c.column_id,l.catalog_configuration=JSON.stringify({modules:c.modules,power_calculation:c.power_calculation})),a==="create"?(await E.post("/assets",{serial_number:n,...l}),i.success(s("assets.assetCreated")),setTimeout(()=>f("/assets"),1500)):(await E.put(`/assets/${g}`,l),i.success(s("assets.assetUpdated")),setTimeout(()=>f(`/assets/${g}`),1500))}catch(n){i.error(s("errors.UNKNOWN_ERROR"),n.message),h(n.message||s("errors.UNKNOWN_ERROR"))}finally{u(!1)}},R={};j.forEach(t=>{const n=t.field_category||"other";R[n]||(R[n]=[]),R[n].push(t)});const B={identification:s("settings.categories.identification")||"Identificação",specifications:s("settings.categories.specifications")||"Especificações",installation:s("settings.categories.installation")||"Instalação",warranty:s("settings.categories.warranty")||"Garantia",maintenance:s("settings.categories.maintenance")||"Manutenção",equipment:s("settings.categories.equipment")||"Equipamento",other:s("settings.categories.other")||"Outros"},F=["identification","specifications","installation","warranty","maintenance","equipment","other"];return p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(K,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("button",{onClick:()=>f(-1),className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex-shrink-0",children:e.jsx(Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-gray-100 truncate",children:s(a==="create"?"assets.newAsset":"assets.editAsset")}),a==="edit"&&e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 truncate",children:g})]}),e.jsxs("button",{type:"button",onClick:()=>N(!0),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-xs sm:text-sm flex-shrink-0",children:[e.jsx(ne,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:s("configurator.openConfigurator")}),e.jsx("span",{className:"sm:hidden",children:s("configurator.title")})]})]}),c&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx(H,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-sm sm:text-base text-green-800 dark:text-green-200 truncate",children:[s("configurator.title")," - ",c.column_reference]}),e.jsxs("p",{className:"text-xs sm:text-sm text-green-700 dark:text-green-300 mt-1",children:["Pack: ",c.pack," • ",c.height_m,"m"]}),c.power_calculation&&e.jsxs("div",{className:"mt-2 sm:mt-3 flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-600"}),e.jsxs("span",{children:[c.power_calculation.max_power,"W max"]})]}),e.jsx("span",{className:"text-gray-400 hidden sm:inline",children:"→"}),e.jsxs("span",{children:[c.power_calculation.installed_power,"W ",s("configurator.installedPower")]}),e.jsx("span",{className:"text-gray-400 hidden sm:inline",children:"→"}),e.jsxs("span",{className:c.power_calculation.is_valid?"text-green-600 font-medium":"text-red-600 font-medium",children:[c.power_calculation.remaining_power,"W ",s("configurator.remainingPower")]}),c.power_calculation.is_valid?e.jsx(H,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600"}):e.jsx(oe,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-600"})]})]}),e.jsx("button",{type:"button",onClick:()=>N(!0),className:"text-xs sm:text-sm text-purple-600 hover:text-purple-700 font-medium flex-shrink-0",children:s("common.edit")})]})}),S&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 rounded-lg",children:S}),e.jsxs("form",{onSubmit:L,className:"space-y-4 sm:space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 sm:p-6",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:s("assets.serialNumber")}),e.jsx(ee,{label:s("assets.serialNumber"),name:"serial_number",type:"text",value:w.serial_number||"",onChange:t=>I("serial_number",t),required:!0,disabled:a==="edit",helpText:a==="create"?s("assetForm.autoGeneratedNumber"):void 0})]}),F.map(t=>{const n=R[t];return!n||n.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 sm:p-6",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4",children:B[t]||t}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:n.sort((l,k)=>l.field_order-k.field_order).filter(l=>!["gps_latitude","gps_longitude"].includes(l.field_name)).map(l=>{let k=[];if(l.field_options)try{k=typeof l.field_options=="string"?JSON.parse(l.field_options):l.field_options}catch{k=[]}const b=c&&(l.field_name==="product_reference"||l.field_name==="height_meters"||l.field_name==="power_watts"||l.field_name==="electrical_max_power"||l.field_name==="total_installed_power"||l.field_name==="remaining_power"||l.field_name==="electrical_connection_type");return e.jsx(ee,{label:l.field_label,name:l.field_name,type:l.field_type,value:w[l.field_name]??"",onChange:T=>I(l.field_name,T),required:!!l.required,options:k,className:`${l.field_type==="textarea"||l.field_type==="gps"?"md:col-span-2":""} ${b?"ring-2 ring-purple-200 dark:ring-purple-800 rounded-lg":""}`,helpText:b?s("configurator.title"):void 0},l.id)})})]},t)}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4",children:[e.jsx("button",{type:"button",onClick:()=>f(-1),className:"w-full sm:w-auto px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-sm sm:text-base order-2 sm:order-1",children:s("common.cancel")}),e.jsx("button",{type:"submit",disabled:m,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm sm:text-base order-1 sm:order-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2 animate-spin"}),s("common.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),s(a==="create"?"assets.newAsset":"common.save")]})})]})]}),A&&e.jsx(_e,{onComplete:$,onCancel:()=>N(!1),initialColumn:c==null?void 0:c.column_id})]})}function Se(){const{t:a,i18n:f}=O(),g=Q(),{serialNumber:o}=ae(),[s,i]=d.useState(null),[p,x]=d.useState(!0),[m,u]=d.useState(""),[S,h]=d.useState(!1),[j,y]=d.useState(!1),[w,v]=d.useState([]),[A,N]=d.useState(!1),[c,_]=d.useState({}),[C,M]=d.useState(!1),[U,I]=d.useState(!1),[$,W]=d.useState(1),[L,R]=d.useState(!1);d.useEffect(()=>{B(),F()},[o]);const B=async()=>{x(!0);try{const r=await E.get(`/assets/${o}`);i(r)}catch(r){u(r.message||a("errors.ASSET_NOT_FOUND"))}finally{x(!1)}},F=async()=>{var r;try{const D=await E.get(`/assets/${o}/modules`);v(D.modules||[]);const q={};(r=D.modules)==null||r.forEach(V=>{q[V.module_name]=V.serial_number||""}),_(q)}catch(D){console.error("Error loading modules:",D)}},t=async()=>{M(!0);try{const r=Object.entries(c).map(([D,q])=>({module_name:D,serial_number:q}));await E.post(`/assets/${o}/modules/bulk`,{modules:r}),N(!1),F()}catch(r){u(r.message)}finally{M(!1)}},n=async()=>{R(!0);try{const r=await E.post("/assets/duplicate",{serial_number:o,quantity:$});I(!1),g("/assets")}catch(r){u(r.message)}finally{R(!1)}},l=async()=>{y(!0);try{await E.delete(`/assets/${o}`),g("/assets")}catch(r){u(r.message||a("errors.UNKNOWN_ERROR")),h(!1)}finally{y(!1)}},k=r=>{const D=f.language==="pt"?"pt-PT":f.language==="fr"?"fr-FR":f.language==="de"?"de-DE":"en-GB";return new Date(r).toLocaleDateString(D,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};if(p)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(K,{className:"h-8 w-8 animate-spin text-blue-600"})});if(m||!s)return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>g("/assets"),className:"inline-flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),a("common.back")]}),e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:m||a("errors.ASSET_NOT_FOUND")})]});const b=s.fields||{},T=b.condition_status||b.status,z={identification:["rfid_tag","product_reference","manufacturer","model"],location:["installation_location","street_address","municipality","gps_latitude","gps_longitude"],specifications:["height_meters","material","power_watts","connection_type"],dates:["installation_date","warranty_end_date","last_inspection_date","next_inspection_date","next_maintenance_date"]};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>g("/assets"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Z,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.serial_number}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:b.product_reference||a("assetDetail.noReference")}),T&&e.jsx(P,{status:T,size:"lg"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>I(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),a("assets.duplicate")||"Duplicar"]}),e.jsxs("button",{onClick:()=>g(`/assets/${o}/edit`),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),a("common.edit")]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),a("common.delete")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a("settings.categories.identification")}),e.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("assets.serialNumber")}),e.jsx("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.serial_number})]}),z.identification.map(r=>b[r]&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.replace(/_/g," ")}),e.jsx("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:b[r]})]},r))]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),a("assets.location")]}),e.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:z.location.map(r=>b[r]&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.replace(/_/g," ")}),e.jsx("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:b[r]})]},r))}),b.gps_latitude&&b.gps_longitude&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:`https://www.google.com/maps?q=${b.gps_latitude},${b.gps_longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm",children:a("form.viewOnGoogleMaps")})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),a("settings.categories.specifications")]}),e.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:z.specifications.map(r=>b[r]&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.replace(/_/g," ")}),e.jsx("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:b[r]})]},r))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),a("assetDetail.importantDates")]}),e.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common.createdAt")}),e.jsx("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:k(s.created_at)})]}),s.updated_at&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common.updatedAt")}),e.jsx("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:k(s.updated_at)})]}),z.dates.map(r=>b[r]&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.replace(/_/g," ")}),e.jsx("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:new Date(b[r]).toLocaleDateString("pt-PT")})]},r))]})]}),b.notes&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a("common.observations")}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:b.notes})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),a("assets.modules")||"Módulos/Equipamentos"]}),A?e.jsxs("button",{onClick:t,disabled:C,className:"inline-flex items-center px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[C?e.jsx(K,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(te,{className:"h-4 w-4 mr-1"}),a("common.save")]}):e.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),a("common.edit")]})]}),w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.module_name}),r.module_description&&e.jsx("p",{className:"text-sm text-gray-500",children:r.module_description})]}),A?e.jsx("input",{type:"text",value:c[r.module_name]||"",onChange:D=>_(q=>({...q,[r.module_name]:D.target.value})),placeholder:a("assets.serialNumber")||"Nº Série",className:"w-48 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}):e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.serial_number||"-"})]},r.id))}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:a("assets.noModules")||"Nenhum módulo configurado"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),a("assetDetail.statusHistory")]}),s.status_history&&s.status_history.length>0?e.jsx("div",{className:"space-y-4",children:s.status_history.map((r,D)=>e.jsxs("div",{className:"relative pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"absolute -left-1.5 top-0 w-3 h-3 bg-blue-600 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r.previous_status&&e.jsxs(e.Fragment,{children:[e.jsx(P,{status:r.previous_status,size:"sm"}),e.jsx("span",{className:"text-gray-400",children:"→"})]}),e.jsx(P,{status:r.new_status,size:"sm"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.description}),e.jsxs("p",{className:"text-xs text-gray-400",children:[k(r.changed_at),r.changed_by_name&&` ${a("common.by")} ${r.changed_by_name}`]})]})]},r.id))}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("assetDetail.noStatusHistory")})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a("dashboard.quickActions")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>g(`/interventions/new?asset=${o}`),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a("interventions.newIntervention")}),e.jsx("button",{onClick:()=>g(`/interventions?asset=${o}`),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a("assetDetail.viewInterventions")})]})]})]})]}),e.jsx(Ne,{isOpen:S,onClose:()=>h(!1),onConfirm:l,title:a("assets.deleteAsset"),message:a("assets.confirmDelete"),confirmText:a("common.delete"),variant:"danger",loading:j}),U&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a("assets.duplicateAsset")||"Duplicar Ativo"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:a("assets.duplicateDescription")||"Os novos ativos terão estado Suspenso e sem RFID/GPS."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("assets.quantity")||"Quantidade"}),e.jsx("input",{type:"number",min:"1",max:"99",value:$,onChange:r=>W(Math.min(99,Math.max(1,parseInt(r.target.value)||1))),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:a("common.cancel")}),e.jsxs("button",{onClick:n,disabled:L,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[L?e.jsx(K,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(J,{className:"h-4 w-4 mr-2"}),a("assets.duplicate")||"Duplicar"]})]})]})})]})}const Ce=()=>{const{t:a}=O(),{formatDate:f}=pe(),g=Q(),[o,s]=d.useState([]),[i,p]=d.useState(null),[x,m]=d.useState(!0),[u,S]=d.useState(""),[h,j]=d.useState(""),[y,w]=d.useState(1);d.useEffect(()=>{v()},[y]);const v=async c=>{m(!0);try{const _=new URLSearchParams({page:y.toString(),per_page:"20"}),C=c!==void 0?c:h;C&&_.append("search",C);const M=await E.get(`/assets?${_}`);s(M.data||[]),p(M.pagination)}catch(_){S(_.message||a("errors.SERVER_ERROR"))}finally{m(!1)}},A=c=>{j(c),w(1),v(c)},N=[{key:"serial_number",label:a("assets.serialNumber"),sortable:!0,render:c=>e.jsx("span",{className:"font-semibold text-slp-navy dark:text-white",children:c})},{key:"product_reference",label:a("catalog.reference"),sortable:!0,render:c=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:c||"-"})},{key:"installation_location",label:a("assets.location"),render:(c,_)=>e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:c||_.street_address||"-"})},{key:"condition_status",label:a("common.status"),render:(c,_)=>{const C=c||_.status;return C?e.jsx(P,{status:C}):"-"}},{key:"created_at",label:a("common.createdAt"),sortable:!0,render:c=>e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:f(c)})}];return e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slp-navy dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-slp-cyan to-slp-blue-bright",children:e.jsx(be,{size:24,className:"text-white"})}),a("assets.title")]}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:[(i==null?void 0:i.total)||0," ",a("assets.title").toLowerCase()," ",a("common.registered").toLowerCase()]})]})}),u&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 rounded-2xl",children:u}),e.jsx("div",{className:"bg-white dark:bg-gray-800/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 overflow-hidden",children:e.jsx(fe,{data:o,columns:N,loading:x,searchable:!0,searchValue:h,onSearchChange:A,searchPlaceholder:`${a("common.search")} ${a("assets.serialNumber").toLowerCase()}...`,onRowClick:c=>g(`/assets/${c.serial_number}`),emptyMessage:a("table.noResults"),pagination:i?{page:i.page,perPage:i.per_page,total:i.total,onPageChange:w}:void 0,actions:e.jsxs("button",{onClick:()=>g("/assets/new"),className:"group inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-slp-cyan to-slp-blue-bright text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-slp-cyan/30 transition-all duration-300",children:[e.jsx(ye,{size:20,className:"mr-2 group-hover:scale-110 transition-transform"}),a("assets.newAsset")]})})})]})]})},Le=()=>e.jsxs(re,{children:[e.jsx(G,{index:!0,element:e.jsx(Ce,{})}),e.jsx(G,{path:"new",element:e.jsx(se,{mode:"create"})}),e.jsx(G,{path:":serialNumber",element:e.jsx(Se,{})}),e.jsx(G,{path:":serialNumber/edit",element:e.jsx(se,{mode:"edit"})})]});export{Le as default};
