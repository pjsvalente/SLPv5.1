import{j as e}from"./vendor-ui-CHMJddlm.js";import{r as o}from"./vendor-react-B7WRoy5K.js";import{u as L,a as i,l as h,r as k,h as $,H as E,C as G}from"./index-BjfB3M3w.js";import"./vendor-charts-C5vizwv2.js";const P=()=>{const{t:r}=L(),[S,b]=o.useState(!0),[d,m]=o.useState(!1),[y,l]=o.useState({type:"",text:""}),[f,v]=o.useState({manufacturer:"",model:"",material:"",column_color:""}),[u,g]=o.useState({warranty_years:"5",inspection_months:"12",maintenance_months:"6"}),[c,p]=o.useState({manufacturers:[],models:[],materials:[],colors:[]}),[j,w]=o.useState({manufacturers:"",models:"",materials:"",colors:""});o.useEffect(()=>{_()},[]);const _=async()=>{b(!0);try{const a=await i.get("/settings/favorites");v(t=>({...t,...a}));const s=await i.get("/settings/defaults");g(t=>({...t,...s}));const n=await i.get("/settings/lists");p(t=>({...t,...n}))}catch(a){console.error("Error loading settings:",a)}finally{b(!1)}},D=async()=>{m(!0);try{await i.put("/settings/favorites",f),l({type:"success",text:r("settings.saved")||"Guardado com sucesso"}),setTimeout(()=>l({type:"",text:""}),3e3)}catch(a){l({type:"error",text:a.message})}finally{m(!1)}},M=async()=>{m(!0);try{await i.put("/settings/defaults",u),l({type:"success",text:r("settings.saved")||"Guardado com sucesso"}),setTimeout(()=>l({type:"",text:""}),3e3)}catch(a){l({type:"error",text:a.message})}finally{m(!1)}},N=async a=>{var n;const s=(n=j[a])==null?void 0:n.trim();if(s)try{await i.post(`/settings/lists/${a}/add`,{value:s}),p(t=>({...t,[a]:[...t[a]||[],s]})),w(t=>({...t,[a]:""}))}catch(t){l({type:"error",text:t.message})}},F=async(a,s)=>{const n=c[a].filter((t,x)=>x!==s);try{await i.put(`/settings/lists/${a}`,{values:n}),p(t=>({...t,[a]:n}))}catch(t){l({type:"error",text:t.message})}},K=(a,s)=>{const t={manufacturers:"manufacturer",models:"model",materials:"material",colors:"column_color"}[a];t&&v(x=>({...x,[t]:x[t]===s?"":s}))},I=[{name:"colors",label:r("settings.colors")||"Cores",values:c.colors||[],favoriteKey:"column_color"},{name:"manufacturers",label:r("settings.manufacturers")||"Fabricantes",values:c.manufacturers||[],favoriteKey:"manufacturer"},{name:"models",label:r("settings.models")||"Modelos",values:c.models||[],favoriteKey:"model"},{name:"materials",label:r("settings.materials")||"Materiais",values:c.materials||[],favoriteKey:"material"}];return S?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(h,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-8",children:[y.text&&e.jsx("div",{className:`p-4 rounded-lg ${y.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:y.text}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:r("settings.defaultDates")||"Datas Automáticas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:r("settings.defaultDatesDescription")||"Configure os períodos automáticos para cálculo de datas de garantia, inspeção e manutenção."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("settings.warrantyYears")||"Anos de Garantia"}),e.jsx("input",{type:"number",min:"1",max:"20",value:u.warranty_years,onChange:a=>g(s=>({...s,warranty_years:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("settings.inspectionMonths")||"Meses até Inspeção"}),e.jsx("input",{type:"number",min:"1",max:"60",value:u.inspection_months,onChange:a=>g(s=>({...s,inspection_months:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("settings.maintenanceMonths")||"Meses até Manutenção"}),e.jsx("input",{type:"number",min:"1",max:"60",value:u.maintenance_months,onChange:a=>g(s=>({...s,maintenance_months:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:M,disabled:d,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[d?e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(k,{className:"h-4 w-4 mr-2"}),r("common.save")||"Guardar"]})})]}),I.map(a=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:a.label}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:r("settings.listDescription")||"Clique na estrela para definir o valor favorito (pré-selecionado ao criar ativos)."}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:j[a.name]||"",onChange:s=>w(n=>({...n,[a.name]:s.target.value})),placeholder:r("settings.addNew")||"Adicionar novo...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",onKeyPress:s=>s.key==="Enter"&&N(a.name)}),e.jsx("button",{onClick:()=>N(a.name),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:e.jsx($,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.values.map((s,n)=>{const t=a.favoriteKey&&f[a.favoriteKey]===s;return e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full ${t?"bg-yellow-100 dark:bg-yellow-900/30 border-2 border-yellow-400":"bg-gray-100 dark:bg-gray-600"}`,children:[e.jsx("button",{onClick:()=>K(a.name,s),className:`transition-colors ${t?"text-yellow-500":"text-gray-400 hover:text-yellow-500"}`,title:t?"Remover favorito":"Definir como favorito",children:e.jsx(E,{className:`h-4 w-4 ${t?"fill-current":""}`})}),e.jsx("span",{className:"text-sm",children:s}),e.jsx("button",{onClick:()=>F(a.name,n),className:"text-gray-400 hover:text-red-500",children:e.jsx(G,{className:"h-4 w-4"})})]},n)}),a.values.length===0&&e.jsx("p",{className:"text-gray-500 text-sm italic",children:r("settings.noItems")||"Nenhum item configurado"})]})]},a.name)),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:D,disabled:d,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[d?e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(k,{className:"h-4 w-4 mr-2"}),r("settings.saveFavorites")||"Guardar Favoritos"]})})]})};export{P as default};
