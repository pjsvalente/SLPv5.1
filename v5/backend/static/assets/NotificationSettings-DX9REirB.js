import{j as e}from"./vendor-ui-CHMJddlm.js";import{r as i}from"./vendor-react-B7WRoy5K.js";import{c as _,u as w,a as g,L as m,B as S,A as E}from"./index-DtPl0Aq5.js";import{C as b}from"./check-xYvCpsRn.js";import{C}from"./clock-BNBMV1Ah.js";import{M as R}from"./mail-CjxTojxw.js";import{C as T}from"./calendar-QtzoQi5S.js";import"./vendor-charts-C5vizwv2.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=_("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),U=()=>{const{t:a}=w(),[f,h]=i.useState(!0),[x,y]=i.useState(!1),[u,p]=i.useState(!1),[l,j]=i.useState(""),[d,r]=i.useState(null),[s,o]=i.useState({email_maintenance_alerts:"true",email_daily_report:"false",email_intervention_updates:"true",alert_days_before:"7",warranty_alert_days:"30"});i.useEffect(()=>{v()},[]);const v=async()=>{try{const t=await g.get("/settings/notifications");o(t)}catch(t){r({type:"error",text:t.message||a("errors.SERVER_ERROR")})}finally{h(!1)}},k=async()=>{y(!0),r(null);try{await g.put("/settings/notifications",s),r({type:"success",text:a("notifications.settingsSaved")})}catch(t){r({type:"error",text:t.message||a("errors.SERVER_ERROR")})}finally{y(!1)}},N=async()=>{if(l){p(!0),r(null);try{await g.post("/settings/notifications/test",{email:l}),r({type:"success",text:a("notifications.testEmailSent")})}catch(t){r({type:"error",text:t.message||a("notifications.testEmailFailed")})}finally{p(!1)}}},c=t=>{o(n=>({...n,[t]:n[t]==="true"?"false":"true"}))};return f?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(m,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:a("notifications.title")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("notifications.description")})]})]}),d&&e.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 ${d.type==="success"?"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-300"}`,children:[d.type==="success"?e.jsx(b,{className:"h-5 w-5"}):e.jsx(E,{className:"h-5 w-5"}),d.text]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(C,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("notifications.maintenanceAlerts")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("notifications.maintenanceAlertsDesc")})]})]}),e.jsx("button",{onClick:()=>c("email_maintenance_alerts"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.email_maintenance_alerts==="true"?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.email_maintenance_alerts==="true"?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(R,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("notifications.interventionUpdates")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("notifications.interventionUpdatesDesc")})]})]}),e.jsx("button",{onClick:()=>c("email_intervention_updates"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.email_intervention_updates==="true"?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.email_intervention_updates==="true"?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(T,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("notifications.dailyReport")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("notifications.dailyReportDesc")})]})]}),e.jsx("button",{onClick:()=>c("email_daily_report"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.email_daily_report==="true"?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.email_daily_report==="true"?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("notifications.alertTiming")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("notifications.daysBeforeMaintenance")}),e.jsxs("select",{value:s.alert_days_before,onChange:t=>o(n=>({...n,alert_days_before:t.target.value})),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsxs("option",{value:"3",children:["3 ",a("common.days")]}),e.jsxs("option",{value:"7",children:["7 ",a("common.days")]}),e.jsxs("option",{value:"14",children:["14 ",a("common.days")]}),e.jsxs("option",{value:"30",children:["30 ",a("common.days")]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("notifications.daysBeforeWarranty")}),e.jsxs("select",{value:s.warranty_alert_days,onChange:t=>o(n=>({...n,warranty_alert_days:t.target.value})),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsxs("option",{value:"14",children:["14 ",a("common.days")]}),e.jsxs("option",{value:"30",children:["30 ",a("common.days")]}),e.jsxs("option",{value:"60",children:["60 ",a("common.days")]}),e.jsxs("option",{value:"90",children:["90 ",a("common.days")]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:a("notifications.testEmail")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"email",value:l,onChange:t=>j(t.target.value),placeholder:a("notifications.enterEmailToTest"),className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),e.jsxs("button",{onClick:N,disabled:!l||u,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 flex items-center gap-2",children:[u?e.jsx(m,{size:"sm"}):e.jsx($,{className:"h-4 w-4"}),a("notifications.sendTest")]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:k,disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[x?e.jsx(m,{size:"sm"}):e.jsx(b,{className:"h-4 w-4"}),a("common.save")]})})]})};export{U as default};
